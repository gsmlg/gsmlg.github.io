{"pageProps":{"slug":"using-web-cryptocraphy-api","blog":{"id":75,"slug":"using-web-cryptocraphy-api","title":"Using Web Cryptography API","date":"2022-07-07","author":"Gao","content":"Today, when I check security alerts from github code scanning alerts.\n\nI see one of them are an issue need to fix.\n\nIt is the cryptography problem, that in javascript Math.random is a pseudo random number generator and can be easy guessed.\n\nSo I have to fix this issue in my code.\n\nI check the code, and that most of random number is not used in crptography, they only for random select an object.\n\nBut one utils that I need to fix is the old createUUID utils, it is written in pure javascript, it inplemenet the algorithms from rfc4122.\n\nNow in javascript, we can use the new crypt API.\n\n### Web Crypto API\n\n[MDN link](https://developer.mozilla.org/en-US/docs/Web/API/Crypto)\n\nThe Web Crypto API is an interface allowing a script to use cryptographic primitives in order to build systems using cryptography.\n\n#### Interfaces\n\nSome browsers implemented an interface called Crypto without having it well defined or being cryptographically sound. \nIn order to avoid confusion, methods and properties of this interface have been removed from browsers implementing the Web Crypto API, \nand all Web Crypto API methods are available on a new interface: SubtleCrypto. \nThe Crypto.subtle property gives access to an object implementing it.\n\n### Crypto\n\nThe `Crypto` interface represents basic cryptography features available in the current context. \nIt allows access to a cryptographically strong random number generator and to cryptographic primitives.\n\n      Note: This feature is available in Web Workers\n\nThe `Web Crypto API` is accessed through the global `crypto` property, which is a `Crypto` object.\n\n#### Properties\n\nThis interface implements properties defined on RandomSource.\n\nCrypto.subtle Read only Secure context\nReturns a SubtleCrypto object providing access to common cryptographic primitives, like hashing, signing, encryption, or decryption.\n\n#### Methods\n\nThis interface implements methods defined on `RandomSource`.\n\n##### `Crypto.getRandomValues()`\n\nFills the passed `TypedArray` with cryptographically sound random values.\n\n##### `Crypto.randomUUID()`\n\nReturns a randomly generated, 36 character long v4 UUID.\n\n#### Usage notes\n\nYou should avoid using the Web Crypto API on insecure contexts, \neven though the Crypto interface is present on insecure contexts, as is the `crypto` property. \nIn addition, the Crypto method `getRandomValues()` is available on insecure contexts, \nbut the `subtle` property is not.\n\nIn general, you probably should just treat Crypto as available only on secure contexts.\n\n#### Specifications\n\n**Specification**\n\n- [Web Cryptography API #crypto-interface](https://w3c.github.io/webcrypto/#crypto-interface)\n\n"},"lightCss":"pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-built_in,.hljs-class .hljs-title,.hljs-title.class_{color:#c18401}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}","darkCss":"pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-built_in,.hljs-class .hljs-title,.hljs-title.class_{color:#e6c07b}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}"},"__N_SSG":true}