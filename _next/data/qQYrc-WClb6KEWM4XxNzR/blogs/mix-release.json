{"pageProps":{"slug":"mix-release","blog":{"author":"Gao","content":"# 使用Mix.release代替distillery\n\nElixir在1.9中推出了mix.release功能，来发布OTP版本\n\n由于是语言本身提供的功能，在phoenix中提供了runtime config配置来处理对应参数，相对于distillery开发方便了很多。\n\n简单实用方法：\n\n初始化release\n```bash\nmix release.init\n```\n\n会生成并创建\n```\nrel/\n  env.bat.eex\n  env.sh.eex\n  remote.vm.args.eex\n  vm.args.eex\n```\n\n在`mix.exs`中添加\n```elixir\ndef project do\n    [\n      # ...\n      releases: [\n        gsmlg_umbrella: [\n          applications: [\n            gsmlg: :permanent,\n            gsmlg_web: :permanent\n          ]\n        ],\n        gsmlg_web_only: [\n          applications: [gsmlg_web: :permanent]\n        ],\n        gsmlg_only: [\n          applications: [gsmlg: :permanent]\n        ]\n      ]\n      # ...\n    ]\n  end\n```\n\n发布版本\n```bash\nMIX_ENV=prod mix release <<release name>>\n```\n\n### 相对与`distillery`的不同\n\n相对于`distillery`配置来说大大的简化了对应的配置\n\n缺点是： **不再支持erlang VM最强大的特性，热更新**\n","date":"2021-10-14","id":54,"slug":"mix-release","title":"使用Mix.release代替distillery"}},"__N_SSG":true}