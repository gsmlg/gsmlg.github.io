(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{3831:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools/three-fiber/cloud",function(){return t(296)}])},296:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return C}});var o=t(3833),i=t(8526),a=t(3775),r=t(7636),l=t.n(r),c=t(9594),s=t(9541),u=t(3981),f=t(3202),h=t(8648),v=t(2035);let d=e=>e===Object(e)&&!Array.isArray(e)&&"function"!=typeof e;function m(e,n){let t=(0,f.z)(e=>e.gl),o=(0,f.D)(v.TextureLoader,d(e)?Object.values(e):e);if((0,u.useLayoutEffect)(()=>{null==n||n(o)},[n]),(0,u.useEffect)(()=>{let e=Array.isArray(o)?o:[o];e.forEach(t.initTexture)},[t,o]),!d(e))return o;{let i=Object.keys(e),a={};return i.forEach(e=>Object.assign(a,{[e]:o[i.indexOf(e)]})),a}}m.preload=e=>f.D.preload(v.TextureLoader,e),m.clear=e=>f.D.clear(v.TextureLoader,e);var p=t(1346),g=t(295);let y=u.forwardRef(function({follow:e=!0,lockX:n=!1,lockY:t=!1,lockZ:o=!1,...i},a){let r=u.useRef();return(0,f.A)(({camera:i})=>{if(!e||!r.current)return;let a=r.current.rotation.clone();r.current.quaternion.copy(i.quaternion),n&&(r.current.rotation.x=a.x),t&&(r.current.rotation.y=a.y),o&&(r.current.rotation.z=a.z)}),u.createElement("group",(0,p.Z)({ref:(0,g.Z)([r,a])},i))});var x=t(9851),E=t(3);class S extends v.Mesh{constructor(){super(new v.BoxGeometry(1,1,1),S.material)}}(0,E.Z)(S,"SkyShader",{uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new v.Vector3},up:{value:new v.Vector3(0,1,0)}},vertexShader:"uniform vec3 sunPosition;\nuniform float rayleigh;\nuniform float turbidity;\nuniform float mieCoefficient;\nuniform vec3 up;\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\nconst float e = 2.71828182845904523536028747135266249775724709369995957;\nconst float pi = 3.141592653589793238462643383279502884197169;\nconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\nconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\nconst float v = 4.0;\nconst vec3 K = vec3( 0.686, 0.678, 0.666 );\nconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\nconst float cutoffAngle = 1.6110731556870734;\nconst float steepness = 1.5;\nconst float EE = 1000.0;\nfloat sunIntensity( float zenithAngleCos ) {\n	zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n	return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n}\nvec3 totalMie( float T ) {\n	float c = ( 0.2 * T ) * 10E-18;\n	return 0.434 * c * MieConst;\n}\nvoid main() {\n	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n	vWorldPosition = worldPosition.xyz;\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n	gl_Position.z = gl_Position.w;\n	vSunDirection = normalize( sunPosition );\n	vSunE = sunIntensity( dot( vSunDirection, up ) );\n	vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n	float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n	vBetaR = totalRayleigh * rayleighCoefficient;\n	vBetaM = totalMie( turbidity ) * mieCoefficient;\n}",fragmentShader:"varying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\nuniform float mieDirectionalG;\nuniform vec3 up;\nconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\nconst float pi = 3.141592653589793238462643383279502884197169;\nconst float n = 1.0003;\nconst float N = 2.545E25;\nconst float rayleighZenithLength = 8.4E3;\nconst float mieZenithLength = 1.25E3;\nconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\nconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\nconst float ONE_OVER_FOURPI = 0.07957747154594767;\nfloat rayleighPhase( float cosTheta ) {\n	return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n}\nfloat hgPhase( float cosTheta, float g ) {\n	float g2 = pow( g, 2.0 );\n	float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n	return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n}\nvoid main() {\n	vec3 direction = normalize( vWorldPosition - cameraPos );\n	float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n	float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n	float sR = rayleighZenithLength * inverse;\n	float sM = mieZenithLength * inverse;\n	vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n	float cosTheta = dot( direction, vSunDirection );\n	float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n	vec3 betaRTheta = vBetaR * rPhase;\n	float mPhase = hgPhase( cosTheta, mieDirectionalG );\n	vec3 betaMTheta = vBetaM * mPhase;\n	vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n	Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n	float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\n	float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\n	vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n	vec3 L0 = vec3( 0.1 ) * Fex;\n	float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n	L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n	vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n	vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n	gl_FragColor = vec4( retColor, 1.0 );\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}"}),(0,E.Z)(S,"material",new v.ShaderMaterial({name:"SkyShader",fragmentShader:S.SkyShader.fragmentShader,vertexShader:S.SkyShader.vertexShader,uniforms:v.UniformsUtils.clone(S.SkyShader.uniforms),side:v.BackSide,depthWrite:!1}));let M=u.forwardRef(({inclination:e=.6,azimuth:n=.1,distance:t=1e3,mieCoefficient:o=.005,mieDirectionalG:i=.8,rayleigh:a=.5,turbidity:r=10,sunPosition:l=(function(e,n,t=new v.Vector3){let o=2*Math.PI*(n-.5);return t.x=Math.cos(o),t.y=Math.sin(Math.PI*(e-.5)),t.z=Math.sin(o),t})(e,n),...c},s)=>{let f=u.useMemo(()=>new v.Vector3().setScalar(t),[t]),[h]=u.useState(()=>new S);return u.createElement("primitive",(0,p.Z)({object:h,ref:s,"material-uniforms-mieCoefficient-value":o,"material-uniforms-mieDirectionalG-value":i,"material-uniforms-rayleigh-value":a,"material-uniforms-sunPosition-value":l,"material-uniforms-turbidity-value":r,scale:f},c))});function P(e){let{size:n=1,opacity:t=.5,speed:o=.4,spread:i=10,length:a=1.5,segments:r=20,dir:l=1,...c}=e,h=(0,u.useRef)(),v=m("/images/cloud.png"),d=(0,u.useMemo)(()=>[...Array(r)].map((e,t)=>({x:i/2-Math.random()*i,y:i/2-Math.random()*i,scale:.4+Math.sin((t+1)/r*Math.PI)*((.2+Math.random())*10)*n,density:Math.max(.2,Math.random()),rotation:Math.max(.002,.005*Math.random())*o})),[i,r,o,n]);return(0,f.A)(e=>{var n;return null===(n=h.current)||void 0===n?void 0:n.children.forEach((n,t)=>{n.rotation.z+=d[t].rotation*l,n.scale.setScalar(d[t].scale+(1+Math.sin(e.clock.getElapsedTime()/10))/2*t/10)})}),(0,s.jsx)("group",{...c,children:(0,s.jsx)("group",{position:[0,0,r/2*a],ref:h,children:d.map((e,n)=>{let{x:o,y:i,scale:r,density:l}=e;return(0,s.jsx)(y,{scale:[r,r,r],position:[o,i,-n*a],lockZ:!0,children:(0,s.jsx)("meshStandardMaterial",{map:v,transparent:!0,opacity:r/6*l*t,depthTest:!1})},n)})})})}function Z(){return(0,s.jsx)(P,{size:2,rotation:[0,Math.PI/2,0],position:[0,75,-100],scale:[10,10,10]})}function w(){return(0,s.jsxs)(h.Xz,{camera:{position:[0,-75,0]},children:[(0,s.jsx)("ambientLight",{intensity:.8}),(0,s.jsx)("pointLight",{intensity:2,position:[0,0,-1e3]}),(0,s.jsx)(u.Suspense,{fallback:null,children:(0,s.jsx)(Z,{})}),(0,s.jsx)(x.z,{minPolarAngle:Math.PI/1.5,maxPolarAngle:Math.PI/1.5}),(0,s.jsx)(M,{azimuth:.5,turbidity:10,rayleigh:.5,inclination:.6,distance:1e5})]})}function b(){let e=(0,o.Z)(["\n          flex: 1 1 auto;\n        "]);return b=function(){return e},e}var C=function(){return(0,i.BX)(c.Z,{children:[(0,i.BX)(l(),{children:[(0,i.tZ)("title",{children:"Three Fiber Cloud"}),(0,i.tZ)("meta",{name:"description",content:"Description of Cloud"})]}),(0,i.tZ)("div",{css:(0,a.iv)(b()),children:(0,i.tZ)(w,{})})]})}},9594:function(e,n,t){"use strict";var o=t(3833),i=t(8526),a=t(3981),r=t(5725),l=t(3775),c=t(5412),s=t(8440),u=t(1522),f=t(1169),h=t(3825),v=t(4237),d=t(8692),m=t(4026),p=t.n(m),g=t(2866),y=t(7741);function x(){let e=(0,o.Z)(["\n              margin: 0 2em;\n              display: ",";\n            "]);return x=function(){return e},e}let E=(0,r.ZP)("section")(()=>({display:"flex",minHeight:"100vh",flexDirection:"column",flex:"1 1 auto"})),S=(0,r.ZP)("section")(()=>({display:"flex",flex:"1 1 auto"})),M=(0,r.ZP)("footer")(e=>{let{theme:n}=e;return{lineHeight:"2em",textAlign:"center",marginTop:"0.5em",color:n.palette.getContrastText(n.palette.primary.main),backgroundColor:n.palette.primary.main}}),P=(0,r.ZP)("div")(e=>{let{status:n}=e;return{display:"inline-block",width:16,height:16,borderRadius:8,margin:"0 8px",backgroundColor:n.color}}),Z=[{name:"Home",href:"/"},{name:"Blog",href:"/blogs"},{name:"Presentation",href:"/presentations"},{name:"Tool",href:"/tools"}],w=(e,n)=>{let{children:t}=e,[o,r]=a.useState(!0);a.useEffect(()=>{r("www.gsmlg.cn"===window.location.hostname)},[]);let m=(0,g.sV)(),[w,b]=a.useState({color:"transperant"}),C=(0,y.p3)(),T=(0,y.dU)();a.useEffect(()=>{if(C(),m){let e=()=>{let e=m.connectionState();switch(e){case"connecting":b({color:"#ff0"});break;case"open":b({color:"#0f0"});break;case"closing":b({color:"#0ff"});break;default:b({color:"#f00"})}};e();let n=[m.onOpen(e),m.onClose(e),m.onError(e),m.onMessage(e)];return()=>{m.off(n)}}return()=>{}},[m,C]);let R=a.useCallback(()=>{Notification.requestPermission()},[]);return(0,i.BX)(E,{ref:n,children:[(0,i.tZ)(c.Z,{position:"static",children:(0,i.BX)(s.Z,{children:[(0,i.tZ)(P,{status:w}),(0,i.tZ)(h.Z,{onClick:R,color:"inherit","aria-label":"Menu",size:"large",children:(0,i.tZ)(d.Z,{badgeContent:T,children:(0,i.tZ)(v.Z,{})})}),(0,i.tZ)(u.Z,{type:"title",color:"inherit",children:Z.map(e=>{let{name:n,href:t}=e;return(0,i.tZ)(f.Z,{color:"inherit",children:(0,i.tZ)(p(),{href:t,children:n})},n)})})]})}),(0,i.tZ)(S,{children:t}),(0,i.tZ)(M,{style:{marginTop:0},children:(0,i.BX)("div",{className:"container",children:[(0,i.tZ)("span",{id:"icp-info",css:(0,l.iv)(x(),o?"inline":"none"),children:"京ICP备20014476号-2"}),(0,i.tZ)("span",{children:"Copyright \xa9 2017-2022 GSMLG - Powered by GSMLG Web."})]})})]})};n.Z=a.forwardRef(w)},295:function(e,n){"use strict";n.Z=function(e){return function(n){e.forEach(function(e){"function"==typeof e?e(n):null!=e&&(e.current=n)})}}}},function(e){e.O(0,[564,483,648,851,774,888,179],function(){return e(e.s=3831)}),_N_E=e.O()}]);