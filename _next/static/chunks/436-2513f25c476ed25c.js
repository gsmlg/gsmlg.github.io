"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436],{2436:function(e,r,t){t.d(r,{q:function(){return h}});var n=t(7294),a=t(6135),o=t(606);function i(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,r,t){return(s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,r,t){var n=function(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&null!==(e=u(e)););return e}(e,r);if(n){var a=Object.getOwnPropertyDescriptor(n,r);return a.get?a.get.call(t):a.value}})(e,r,t||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,r){return!r||"object"!==f(r)&&"function"!==typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):r}function l(e,r){return(l=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}var f=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},p=function(e){function r(e){var t;return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),(t=c(this,u(r).call(this,e))).type=o.UnsignedByteType,t}var t,n,a;return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&l(e,r)}(r,e),t=r,(n=[{key:"parse",value:function(e){var r=function(e,r){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(r||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(r||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(r||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(r||""))}return-1},t=function(e,r,t){r=r||1024;for(var n=e.pos,a=-1,o=0,i="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));0>(a=s.indexOf("\n"))&&o<r&&n<e.byteLength;)i+=s,o+=s.length,n+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return-1<a&&(!1!==t&&(e.pos+=o+a+1),i+s.slice(0,a))},n=function(e,r,t,n){var a=e[r+3],o=Math.pow(2,a-128)/255;t[n+0]=e[r+0]*o,t[n+1]=e[r+1]*o,t[n+2]=e[r+2]*o},a=function(e,r,t,n){var a=e[r+3],i=Math.pow(2,a-128)/255;t[n+0]=o.DataUtils.toHalfFloat(e[r+0]*i),t[n+1]=o.DataUtils.toHalfFloat(e[r+1]*i),t[n+2]=o.DataUtils.toHalfFloat(e[r+2]*i)},i=new Uint8Array(e);i.pos=0;var s=function(e){var n,a,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,u=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,c={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(n=t(e)))return r(1,"no header found");if(!(a=n.match(/^#\?(\S+)/)))return r(3,"bad initial token");for(c.valid|=1,c.programtype=a[1],c.string+=n+"\n";!1!==(n=t(e));)if(c.string+=n+"\n","#"!==n.charAt(0)){if((a=n.match(o))&&(c.gamma=parseFloat(a[1],10)),(a=n.match(i))&&(c.exposure=parseFloat(a[1],10)),(a=n.match(s))&&(c.valid|=2,c.format=a[1]),(a=n.match(u))&&(c.valid|=4,c.height=parseInt(a[1],10),c.width=parseInt(a[2],10)),2&c.valid&&4&c.valid)break}else c.comments+=n+"\n";return 2&c.valid?4&c.valid?c:r(3,"missing image size specifier"):r(3,"missing format specifier")}(i);if(-1!==s){var u=s.width,c=s.height,l=function(e,t,n){var a=t;if(a<8||a>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(a!==(e[2]<<8|e[3]))return r(3,"wrong scanline width");var o=new Uint8Array(4*t*n);if(!o.length)return r(4,"unable to allocate buffer space");for(var i=0,s=0,u=4*a,c=new Uint8Array(4),l=new Uint8Array(u),f=n;f>0&&s<e.byteLength;){if(s+4>e.byteLength)return r(1);if(c[0]=e[s++],c[1]=e[s++],c[2]=e[s++],c[3]=e[s++],2!=c[0]||2!=c[1]||(c[2]<<8|c[3])!=a)return r(3,"bad rgbe scanline format");for(var p=0,d=void 0;p<u&&s<e.byteLength;){var y=(d=e[s++])>128;if(y&&(d-=128),0===d||p+d>u)return r(3,"bad scanline data");if(y)for(var h=e[s++],g=0;g<d;g++)l[p++]=h;else l.set(e.subarray(s,s+d),p),p+=d,s+=d}for(var b=a,m=0;m<b;m++){var v=0;o[i]=l[m+v],v+=a,o[i+1]=l[m+v],v+=a,o[i+2]=l[m+v],v+=a,o[i+3]=l[m+v],i+=4}f--}return o}(i.subarray(i.pos),u,c);if(-1!==l){var f,p,d,y;switch(this.type){case o.UnsignedByteType:f=l,p=o.RGBEFormat,d=o.UnsignedByteType;break;case o.FloatType:y=l.length/4*3;for(var h=new Float32Array(y),g=0;g<y;g++)n(l,4*g,h,3*g);f=h,p=o.RGBFormat,d=o.FloatType;break;case o.HalfFloatType:y=l.length/4*3;for(var b=new Uint16Array(y),m=0;m<y;m++)a(l,4*m,b,3*m);f=b,p=o.RGBFormat,d=o.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:u,height:c,data:f,header:s.string,gamma:s.gamma,exposure:s.exposure,format:p,type:d}}}return null}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,t,n,a){return s(u(r.prototype),"load",this).call(this,e,(function(e,r){switch(e.type){case o.UnsignedByteType:e.encoding=o.RGBEEncoding,e.minFilter=o.NearestFilter,e.magFilter=o.NearestFilter,e.generateMipmaps=!1,e.flipY=!0;break;case o.FloatType:case o.HalfFloatType:e.encoding=o.LinearEncoding,e.minFilter=o.LinearFilter,e.magFilter=o.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)}),n,a)}}])&&i(t.prototype,n),a&&i(t,a),r}(o.DataTextureLoader),d=t(8998);const y={sunset:"venice_sunset_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",night:"dikhololo_night_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr",forest:"forest_slope_1k.hdr",apartment:"lebombo_1k.hdr",studio:"studio_small_03_1k.hdr",city:"potsdamer_platz_1k.hdr",park:"rooitou_park_1k.hdr",lobby:"st_fagans_interior_1k.hdr"};function h({background:e=!1,files:r=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:i,scene:s,extensions:u}){if(i){if(!(i in y))throw new Error("Preset must be one of: "+Object.keys(y).join(", "));r=y[i],t="https://rawcdn.githack.com/pmndrs/drei-assets/aa3600359ba664d546d05821bcbca42013587df2/hdri/"}const c=(0,a.Ky)((({scene:e})=>e)),l=(0,a.Ky)((({gl:e})=>e)),f=Array.isArray(r),h=f?o.CubeTextureLoader:p,g=(0,a.U2)(h,f?[r]:r,(e=>{e.setPath(t),u&&u(e)})),b=f?g[0]:g,m=(0,d.G)((()=>new Promise((e=>{const r=new o.PMREMGenerator(l),t=function(e,r,t){return t?(r.compileEquirectangularShader(),r.fromCubemap(e).texture):r.fromEquirectangular(e).texture}(b,r,f);r.dispose(),e(t)}))),b);return n.useLayoutEffect((()=>{const r=s?s.background:c.background,t=s?s.environment:c.environment;return s?(s.environment=m,e&&(s.background=m)):(c.environment=m,e&&(c.background=m)),()=>{s?(s.environment=t,s.background=r):(c.environment=t,c.background=r),d.G.clear(b),m.dispose()}}),[m,e,s]),null}}}]);