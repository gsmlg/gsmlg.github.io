(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{e9122cb4d79d8782ec7a:function(s,a){s.exports='<h1 id=using-docker>Using Docker</h1> <h2 id=\u4ec0\u4e48\u662fdocker>\u4ec0\u4e48\u662fDocker</h2> <p>Docker\u5229\u7528\u73b0\u6709\u7684Linux\u5bb9\u5668\u6280\u672f\uff0c\u4ee5\u4e0d\u540c\u65b9\u5f0f\u5c06\u5176\u5c01\u88c5\u53ca\u6269\u5c55 --\u4e3b\u8981\u662f\u901a\u8fc7\u63d0\u4f9b\u53ef\u4ee5\u503c\u7684\u955c\u50cf\uff0c\u4ee5\u53ca\u4e00\u4e2a\u7528\u6237\u53cb\u597d\u7684\u63a5\u53e3 --\u6765\u521b\u5efa\u4e00\u5957\u5b8c\u6574\u7684\u5bb9\u5668\u521b\u5efa\u53ca\u53d1\u5e03\u65b9\u6848</p> <p>Docker\u5e73\u53f0\u62e5\u6709\u4e24\u4e2a\u4e0d\u540c\u90e8\u5206</p> <ul> <li>\u8d1f\u8d23\u521b\u5efa\u4e0e\u8fd0\u884c\u5bb9\u5668\u7684 Docker Engine</li> <li>\u7528\u6765\u53d1\u5e03\u5bb9\u5668\u7684\u4e91\u670d\u52a1 Docker Hub</li> </ul> <p>Docker\u7684\u54f2\u5b66\u7ecf\u5e38\u7528\u822a\u8fd0\u96c6\u88c5\u7bb1\u7684\u6bd4\u55bb\u6765\u89e3\u91ca\uff0c\u8fd9\u6216\u8bb8\u80fd\u89e3\u91ca Docker \u540d\u5b57\u7684\u7531\u6765\u3002</p> <p>\u8fd9\u4e2a\u6bd4\u55bb\u5927\u6982\u662f\u8fd9\u6837\uff1a</p> <pre class=hljs><code class="language-undefined">\u8fd0\u8f93\u8d27\u7269\u65f6\uff0c\u8981\u7528\u5230\u4e0d\u540c\u7684\u8fd0\u8f93\u5de5\u5177\uff0c\u53ef\u80fd\u5305\u62ec\u8d27\u8f66\u3001\u53c9\u8f66\u3001\u8d77\u91cd\u673a\u3001\u706b\u8f66\u548c\u8f6e\u8239\u3002\n\u8fd9\u610f\u5473\u7740\u8fd9\u4e9b\u5de5\u5177\u5fc5\u987b\u53ef\u4ee5\u5904\u7406\u5927\u5c0f\u4e0d\u4e00\uff0c\u8fd0\u8f93\u9700\u6c42\u5404\u5f02\u7684\u8d27\u7269\u3002\n\u4ee5\u5f80\u8fd9\u662f\u4e00\u9053\u590d\u6742\u7684\u5de5\u5e8f\uff0c\u9700\u8981\u4ed8\u51fa\u5927\u91cf\u7684\u4eba\u529b\u3001\u7269\u529b\u3002\n\u8054\u8fd0\u96c6\u88c5\u7bb1\u7684\u8bde\u751f\u4e3a\u8fd0\u8f93\u4ea7\u4e1a\u5e26\u6765\u4e86\u4e00\u573a\u9769\u547d\u3002\n\u96c6\u88c5\u7bb1\u7684\u5927\u5c0f\u6709\u4e86\u7edf\u4e00\u6807\u51c6\uff0c\u5e76\u4e14\u8bbe\u8ba1\u7684\u51fa\u53d1\u70b9\u662f\u80fd\u4ee5\u6700\u5c11\u7684\u4eba\u529b\u5728\u4e0d\u540c\u7684\u8fd0\u8f93\u65b9\u5f0f\u4e4b\u95f4\u642c\u8fd0\u3002\n\u6240\u6709\u8fd0\u8f93\u673a\u68b0\u90fd\u4e3a\u8fd0\u9001\u96c6\u88c5\u7bb1\u800c\u8bbe\u8ba1\u3002\u8fd0\u8f93\u4e0d\u540c\u7c7b\u578b\u7269\u54c1\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u96c6\u88c5\u7bb1\u3002\n\u56e0\u6b64\u8fd0\u8f93\u4ea7\u4e1a\u53ea\u9700\u8981\u4e13\u6ce8\u4e8e\u5904\u7406\u96c6\u88c5\u7bb1\u7684\u8fd0\u8f93\u53ca\u5b58\u50a8\u95ee\u9898\uff0c\u800c\u96c6\u88c5\u7bb1\u5185\u7684\u7269\u54c1\u5b8c\u5168\u7531\u751f\u4ea7\u5546\u8d1f\u8d23\u3002\n\nDocker \u7684\u76ee\u7684\u662f\u628a\u96c6\u88c5\u7bb1\u7684\u6807\u51c6\u5316\u6d41\u7a0b\u8fd0\u7528\u5230IT\u884c\u4e1a\u4e2d\u53bb\u3002\n\u5982\u4eca\u7684\u5178\u578b\u7cfb\u7edf\u53ef\u80fd\u5305\u62ec<span class=hljs-keyword>Javascript\u6846\u67b6\u3001NoSQL\u6570\u636e\u5e93\u3001\u6d88\u606f\u961f\u5217\u3001REST </span>API\uff0c\n\u4ee5\u53ca\u7531\u5404\u4e2a\u4e0d\u540c\u7f16\u7a0b\u8bed\u8a00\u6240\u5199\u7684\u540e\u7aef\u3002\n\u800c\u8fd9\u4e2a\u7ec4\u5408\u7684\u5168\u90e8\u6216\u90e8\u5206\u53ef\u80fd\u9700\u8981\u8fd0\u884c\u5230\u4e0d\u540c\u7684\u73af\u5883\u4e2d\uff0c\u4ece\u5f00\u53d1\u8005\u7684\u7b14\u8bb0\u672c\u7535\u8111\uff0c \u5230\u516c\u53f8\u5185\u7684\u6d4b\u8bd5\u96c6\u7fa4\uff0c\u518d\u5230\u4e91\u7aef\u7684\u751f\u4ea7\u73af\u5883\u3002\n\u6bcf\u4e2a\u73af\u5883\u90fd\u5b58\u5728\u5dee\u5f02\uff0c\u4ed6\u4eec\u5b58\u5728\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7edf\u548c\u4e0d\u540c\u7684\u7a0b\u5e8f\u5e93\u3002\u6211\u4eec\u9700\u8981\u4ed8\u51fa\u5de8\u5927\u7684\u4eba\u529b\u6765\u5728\u4e0d\u540c\u73af\u5883\u4e4b\u95f4\u79fb\u52a8\u8fd9\u4e9b\u5e94\u7528\u3002\nDocker\u5bb9\u5668\u7b80\u5316\u4e86\u5e94\u7528\u7a0b\u5e8f\u7684\u79fb\u52a8\uff0c\u597d\u6bd4\u96c6\u88c5\u7bb1\u4e00\u6837\u3002\n\u5f00\u53d1\u4eba\u5458\u53ea\u9700\u4e13\u6ce8\u5f00\u53d1\uff0c\u518d\u4e5f\u4e0d\u7528\u62c5\u5fc3\u6d4b\u8bd5\u548c\u53d1\u5e03\u65f6\u73af\u5883\u4ee5\u53ca\u4f9d\u8d56\u5173\u7cfb\u5e26\u6765\u7684\u95ee\u9898\u3002\n\u8fd0\u7ef4\u90e8\u95e8\u53ea\u9700\u4e13\u6ce8\u4e8e\u8fd0\u884c\u5bb9\u5668\u7684\u6838\u5fc3\u95ee\u9898\u3002</code></pre><h2 id=\u5b89\u88c5docker>\u5b89\u88c5Docker</h2> <p>Docker\u9700\u8981\u8fd0\u884c\u4e8e64\u4f4d\u7684Linux\u7cfb\u7edf\u4e0a\uff0c\u5185\u6838\u7248\u672c\u9700\u8981\u5927\u4e8e3.10</p> <p>macOS\u53ef\u4ee5\u4ece<code>docker.com</code>\u4e0b\u8f7d\u5230docker-ce\u7248\u672c\u5b89\u88c5\u4f7f\u7528</p> <p>\u53ef\u4ee5\u4f7f\u7528<code>homebrew</code>\u6765\u5b89\u88c5</p> <pre class=hljs><code class=language-><span class=hljs-keyword>brew </span>cask <span class=hljs-keyword>install </span>docker</code></pre><p>Ubuntu \u7cfb\u7edf\u5b89\u88c5</p> <pre class=hljs><code class=language->sudo apt-<span class=hljs-keyword>get</span> remove docker docker-engine docker.io\napt-<span class=hljs-keyword>get</span> update\n\napt-<span class=hljs-keyword>get</span> install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    software-properties-common\n\ncurl -fsSL https:<span class=hljs-comment>//download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span>\n\napt-key fingerprint <span class=hljs-number>0</span>EBFCD88\n\npub   <span class=hljs-number>4096</span>R/<span class=hljs-number>0</span>EBFCD88 <span class=hljs-number>2017</span><span class=hljs-number>-02</span><span class=hljs-number>-22</span>\n      Key fingerprint = <span class=hljs-number>9</span>DC8 <span class=hljs-number>5822</span> <span class=hljs-number>9</span>FC7 DD38 <span class=hljs-number>854</span>A  E2D8 <span class=hljs-number>8</span>D81 <span class=hljs-number>803</span>C <span class=hljs-number>0</span>EBF CD88\nuid                  Docker Release (CE deb) &lt;<span class=hljs-symbol>docker@</span>docker.com&gt;\nsub   <span class=hljs-number>4096</span>R/F273FCD8 <span class=hljs-number>2017</span><span class=hljs-number>-02</span><span class=hljs-number>-22</span>\n\nadd-apt-repository \\\n   <span class=hljs-string>"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable"</span>\n\napt-<span class=hljs-keyword>get</span> update\n\napt-<span class=hljs-keyword>get</span> install docker-ce\n</code></pre><h2 id=\u8fd0\u884cdocker>\u8fd0\u884cDocker</h2> <h3 id=images-\u955c\u50cf>images \u955c\u50cf</h3> <p>docker\u955c\u50cf\u662f\u4e00\u4e2a\u6784\u5efa\u597d\u7684docker\u73af\u5883\uff0c\u53ef\u4ee5\u4f7f\u7528docker\u76f4\u63a5\u542f\u52a8\u4e00\u4e2a\u955c\u50cf</p> <pre class=hljs><code class=language->docker <span class=hljs-keyword>run</span><span class=bash> debian</span></code></pre><p>\u8fd0\u884c\u955c\u50cf\u4f1a\u81ea\u52a8\u4ece<code>docker hub</code>\u4e0b\u8f7d\u5bf9\u5e94\u7684\u955c\u50cf\uff0c\u5e76\u8fd0\u884c</p> <p>\u8fd0\u884c\u955c\u50cf\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2acontainer</p> <p>\u67e5\u770b\u8fd0\u884c\u4e2d\u7684container\uff1a</p> <pre class=hljs><code class=language-><span class=hljs-attribute>docker ps</span></code></pre><p>\u8fd0\u884c\u4e00\u4e2a\u4ea4\u4e92\u5f0f\u955c\u50cf</p> <pre class=hljs><code class=language->docker run --rm -it gsmlg/phoenix\n<span class=hljs-meta># -i interactive</span>\n<span class=hljs-meta># -t terminal</span>\n<span class=hljs-meta># --rm remove after run</span></code></pre><p>\u5f53docker\u8fd0\u884c\u540e\u4f1a\u751f\u6210\u4e00\u4e2acontainer \u53ef\u4ee5\u901a\u8fc7</p> <pre class=hljs><code class=language-><span class=hljs-attribute>docker ps -a</span></code></pre><p>\u67e5\u770b\u6240\u6709docker containers</p> <p>\u5220\u9664\u65e0\u7528\u7684container</p> <pre class=hljs><code class=language->docker rm -v <span class=hljs-constructor>$(<span class=hljs-params>docker</span> <span class=hljs-params>ps</span> -<span class=hljs-params>aq</span> -<span class=hljs-params>f</span> <span class=hljs-params>status</span>=<span class=hljs-params>exited</span>)</span></code></pre><h3 id=docker-\u955c\u50cf\u6784\u5efa\u4e0e\u53d1\u5e03>Docker \u955c\u50cf\u6784\u5efa\u4e0e\u53d1\u5e03</h3> <h4 id=dockerfile>Dockerfile</h4> <p>docker \u6784\u5efa\u4e00\u4e2a\u955c\u50cf\u9700\u8981\u901a\u8fc7Dockerfile\u6587\u4ef6\u6765\u914d\u7f6e\u955c\u50cf\u7684\u5185\u5bb9</p> <p>\u4e00\u4e2a\u6784\u5efa\u7684Dockerfile\u5185\u5bb9\uff1a</p> <pre class=hljs><code class=language-><span class=hljs-keyword>FROM</span> alpine\n\n<span class=hljs-keyword>MAINTAINER</span> GSMLG &lt; me@gsmlg.org &gt;\n\n<span class=hljs-keyword>RUN</span><span class=bash> apk update \\\n    &amp;&amp; apk add curl \\\n    &amp;&amp; apk add stunnel \\\n    &amp;&amp; apk add squid \\\n    &amp;&amp; rm -rf /var/cache/apk/*</span>\n\n<span class=hljs-keyword>COPY</span><span class=bash> stunnel.conf pkey.pem cert.pem /etc/stunnel/</span>\n\n<span class=hljs-keyword>EXPOSE</span> <span class=hljs-number>443</span>\n\n<span class=hljs-keyword>COPY</span><span class=bash> entrypoint.sh /</span>\n\n<span class=hljs-keyword>ENTRYPOINT</span><span class=bash> [<span class=hljs-string>"/entrypoint.sh"</span>]</span></code></pre><p>Dockerfile \u914d\u7f6e\u8bf4\u660e</p> <h4 id=push-and-pull>push and pull</h4> <p><code>push</code>: \u5c06\u672c\u5730\u955c\u50cf\u63a8\u9001\u5230\u8fdc\u7a0b</p> <p><code>pull</code>: \u62c9\u53d6\u8fdc\u7a0b\u955c\u50cf</p> <h3 id=\u901a\u8fc7docker-compose\u8fd0\u884c>\u901a\u8fc7Docker Compose\u8fd0\u884c</h3> <p>docker compose \u901a\u8fc7yaml\u6307\u5b9adocker\u542f\u52a8\u914d\u7f6e\u53c2\u6570</p> <h4 id=docker-registry>Docker Registry</h4> <pre class=hljs><code class=language-><span class=hljs-symbol>registry:</span>\n  <span class=hljs-symbol>restart:</span> always\n  <span class=hljs-symbol>image:</span> <span class=hljs-symbol>registry:</span><span class=hljs-number>2</span>\n  <span class=hljs-symbol>ports:</span>\n    - <span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>5000</span>:<span class=hljs-number>5000</span>\n  <span class=hljs-symbol>volumes:</span>\n    - ./<span class=hljs-symbol>data:</span>/var/<span class=hljs-class><span class=hljs-keyword>lib</span>/<span class=hljs-title>registry</span></span>\n</code></pre><h3 id=docker-machine>Docker Machine</h3> <p>\u8fd0\u884c\u672c\u5730\u6216\u8fdc\u7a0b\u7684docker\u4e3b\u673a</p> <p>\u81ea\u52a8\u521b\u5efa\u7ba1\u7406\u79fb\u9664</p> '}}]);