(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"13a21107a07a62a32179":function(s,a,n){"use strict";n.r(a),a.default=n.p+"f52dde1016d712ce6880b65bbf915b75.png"},c6da9951b305a4d545ae:function(s,a,n){var l='<h2 id=html5-\u8bbf\u95ee\u89c6\u9891\u548c\u97f3\u9891\u8f93\u5165\u8bbe\u5907>HTML5 \u8bbf\u95ee\u89c6\u9891\u548c\u97f3\u9891\u8f93\u5165\u8bbe\u5907</h2> <h3 id=api-navigatormediadevicesgetusermedia>API: <code>Navigator.MediaDevices.getUserMedia()</code></h3> <h4 id=\u8bed\u6cd5\uff1a>\u8bed\u6cd5\uff1a</h4> <pre class=hljs><code class=language->var promise = navigator.mediaDevices.get<span class=hljs-constructor>UserMedia(<span class=hljs-params>constraints</span>)</span>;</code></pre><h4 id=\u53c2\u6570\uff1a-constraints>\u53c2\u6570\uff1a <em>constraints</em></h4> <p>\u53ef\u4ee5\u914d\u7f6e\u4e3a\u5982\u4e0b\uff1a</p> <pre class=hljs><code class=language-><span class=hljs-string>navigator.mediaDevices.getUsermedia({video:</span> <span class=hljs-literal>true</span><span class=hljs-string>,</span> <span class=hljs-attr>audio:</span> <span class=hljs-literal>true</span><span class=hljs-string>});</span>\n\n<span class=hljs-string>navigator.mediaDevices.getUsermedia({video:</span> <span class=hljs-string>{width:</span> <span class=hljs-number>800</span><span class=hljs-string>,</span> <span class=hljs-attr>height:</span> <span class=hljs-number>480</span><span class=hljs-string>},</span> <span class=hljs-attr>audio:</span> <span class=hljs-literal>true</span><span class=hljs-string>});</span>\n\n<span class=hljs-string>navigator.mediaDevices.getUsermedia({audio:</span> <span class=hljs-literal>true</span><span class=hljs-string>,video:</span>  <span class=hljs-string>{</span>\n    <span class=hljs-attr>width:</span> <span class=hljs-string>{</span> <span class=hljs-attr>min:</span> <span class=hljs-number>1024</span><span class=hljs-string>,</span> <span class=hljs-attr>ideal:</span> <span class=hljs-number>1280</span><span class=hljs-string>,</span> <span class=hljs-attr>max:</span> <span class=hljs-number>1920</span> <span class=hljs-string>},</span>\n    <span class=hljs-attr>height:</span> <span class=hljs-string>{</span> <span class=hljs-attr>min:</span> <span class=hljs-number>776</span><span class=hljs-string>,</span> <span class=hljs-attr>ideal:</span> <span class=hljs-number>720</span><span class=hljs-string>,</span> <span class=hljs-attr>max:</span> <span class=hljs-number>1080</span> <span class=hljs-string>}</span>\n  <span class=hljs-string>}});</span>\n\n<span class=hljs-string>//</span> <span class=hljs-string>\u79fb\u52a8\u8bbe\u5907</span>\n<span class=hljs-string>//</span> <span class=hljs-string>\u524d\u7f6e\u6444\u50cf\u5934</span>\n<span class=hljs-string>navigator.mediaDevices.getUsermedia({</span> <span class=hljs-attr>audio:</span> <span class=hljs-literal>true</span><span class=hljs-string>,</span> <span class=hljs-attr>video:</span> <span class=hljs-string>{</span> <span class=hljs-attr>facingMode:</span> <span class=hljs-string>"user"</span> <span class=hljs-string>}</span> <span class=hljs-string>})</span>\n\n<span class=hljs-string>//</span> <span class=hljs-string>\u786e\u8ba4\u4e3b\u6444\u50cf\u5934</span>\n<span class=hljs-string>navigator.mediaDevices.getUsermedia({</span> <span class=hljs-attr>audio:</span> <span class=hljs-literal>true</span><span class=hljs-string>,</span> <span class=hljs-attr>video:</span> <span class=hljs-string>{</span> <span class=hljs-attr>facingMode:</span> <span class=hljs-string>{</span> <span class=hljs-attr>exact:</span> <span class=hljs-string>"environment"</span> <span class=hljs-string>}</span> <span class=hljs-string>}</span> <span class=hljs-string>})</span>\n\n<span class=hljs-string>//</span> <span class=hljs-string>\u9650\u5236\u5e27\u6570</span>\n<span class=hljs-string>navigator.mediaDevices.getUsermedia({</span> <span class=hljs-attr>video:</span> <span class=hljs-string>{</span> <span class=hljs-attr>frameRate:</span> <span class=hljs-string>{</span> <span class=hljs-attr>ideal:</span> <span class=hljs-number>10</span><span class=hljs-string>,</span> <span class=hljs-attr>max:</span> <span class=hljs-number>15</span> <span class=hljs-string>}</span> <span class=hljs-string>}</span> <span class=hljs-string>})</span>\n</code></pre><h4 id=\u8fd4\u56de\u503c>\u8fd4\u56de\u503c</h4> <p><code>Promise</code> \u5bf9\u8c61</p> <ul> <li><p>\u6210\u529f\u8fd4\u56de\u4e3a <a href=https://developer.mozilla.org/en-US/docs/Web/API/MediaStream><code>MediaStream</code></a> </p> </li> <li><p>\u5931\u8d25\u5f02\u5e38</p> <ul> <li>AbortError</li> <li>NotAllowedError</li> <li>NotFoundError</li> <li>NotReadableError</li> <li>OverConstrainedError</li> <li>SecurityError</li> <li>TypeError</li> </ul> </li> </ul> <h3 id=\u65e9\u671f\u63a5\u53e3\u4e3a-navigatorgetusermedia>\u65e9\u671f\u63a5\u53e3\u4e3a <code>navigator.getUserMedia()</code></h3> <p>\u65e7\u6d4f\u89c8\u5668\u4f7f\u7528\u793a\u4f8b\uff1a</p> <pre class=hljs><code class=language-javascript><span class=hljs-comment>// Older browsers might not implement mediaDevices at all, so we set an empty object first</span>\n<span class=hljs-keyword>if</span> (navigator.mediaDevices === <span class=hljs-literal>undefined</span>) {\n  navigator.mediaDevices = {};\n}\n\n<span class=hljs-comment>// Some browsers partially implement mediaDevices. We can\'t just assign an object</span>\n<span class=hljs-comment>// with getUserMedia as it would overwrite existing properties.</span>\n<span class=hljs-comment>// Here, we will just add the getUserMedia property if it\'s missing.</span>\n<span class=hljs-keyword>if</span> (navigator.mediaDevices.getUserMedia === <span class=hljs-literal>undefined</span>) {\n  navigator.mediaDevices.getUserMedia = <span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>constraints</span>) </span>{\n\n    <span class=hljs-comment>// First get ahold of the legacy getUserMedia, if present</span>\n    <span class=hljs-keyword>var</span> getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n    <span class=hljs-comment>// Some browsers just don\'t implement it - return a rejected promise with an error</span>\n    <span class=hljs-comment>// to keep a consistent interface</span>\n    <span class=hljs-keyword>if</span> (!getUserMedia) {\n      <span class=hljs-keyword>return</span> <span class=hljs-built_in>Promise</span>.reject(<span class=hljs-keyword>new</span> <span class=hljs-built_in>Error</span>(<span class=hljs-string>\'getUserMedia is not implemented in this browser\'</span>));\n    }\n\n    <span class=hljs-comment>// Otherwise, wrap the call to the old navigator.getUserMedia with a Promise</span>\n    <span class=hljs-keyword>return</span> <span class=hljs-keyword>new</span> <span class=hljs-built_in>Promise</span>(<span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>resolve, reject</span>) </span>{\n      getUserMedia.call(navigator, constraints, resolve, reject);\n    });\n  }\n}\n\nnavigator.mediaDevices.getUserMedia({ <span class=hljs-attr>audio</span>: <span class=hljs-literal>true</span>, <span class=hljs-attr>video</span>: <span class=hljs-literal>true</span> })\n.then(<span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>stream</span>) </span>{\n  <span class=hljs-keyword>var</span> video = <span class=hljs-built_in>document</span>.querySelector(<span class=hljs-string>\'video\'</span>);\n  <span class=hljs-comment>// Older browsers may not have srcObject</span>\n  <span class=hljs-keyword>if</span> (<span class=hljs-string>"srcObject"</span> <span class=hljs-keyword>in</span> video) {\n    video.srcObject = stream;\n  } <span class=hljs-keyword>else</span> {\n    <span class=hljs-comment>// Avoid using this in new browsers, as it is going away.</span>\n    video.src = <span class=hljs-built_in>window</span>.URL.createObjectURL(stream);\n  }\n  video.onloadedmetadata = <span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>e</span>) </span>{\n    video.play();\n  };\n})\n.catch(<span class=hljs-function><span class=hljs-keyword>function</span>(<span class=hljs-params>err</span>) </span>{\n  <span class=hljs-built_in>console</span>.log(err.name + <span class=hljs-string>": "</span> + err.message);\n});\n</code></pre><h3 id=\u517c\u5bb9\u60c5\u51b5>\u517c\u5bb9\u60c5\u51b5</h3> <p><img src='+n("302492d1afd5e0e000f5")(n("13a21107a07a62a32179"))+' alt=""></p> ';s.exports=l}}]);