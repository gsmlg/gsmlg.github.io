<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="minimum-scale=1, initial-scale=1, width=device-width"/><meta name="theme-color" content="#1976d2"/><title>Using Web Cryptography API</title><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="5"/><meta name="theme-color" content="#1976d2"/><link rel="preload" href="/_next/static/css/b192415249a5ea5e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b192415249a5ea5e.css" data-n-g=""/><link rel="preload" href="/_next/static/css/c2a527101433f11d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c2a527101433f11d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-e99b50216da4d364.js" defer=""></script><script src="/_next/static/chunks/framework-3583eef75b58b7b2.js" defer=""></script><script src="/_next/static/chunks/main-5ae059702bc551aa.js" defer=""></script><script src="/_next/static/chunks/pages/_app-1426588063346c14.js" defer=""></script><script src="/_next/static/chunks/eb1842f2-0e6c0ec55bbb915e.js" defer=""></script><script src="/_next/static/chunks/519-1db98718002a1c02.js" defer=""></script><script src="/_next/static/chunks/255-5acc2a6bce689546.js" defer=""></script><script src="/_next/static/chunks/pages/blogs/%5Bslug%5D-3b0565580e4d6684.js" defer=""></script><script src="/_next/static/SY-x_ik-yTnqXC5KhuEEd/_buildManifest.js" defer=""></script><script src="/_next/static/SY-x_ik-yTnqXC5KhuEEd/_ssgManifest.js" defer=""></script><style data-emotion="css "></style></head><body><div id="__next"><style data-emotion="css-global o6gwfi">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><section class="css-1vqbnt3"><header class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation4 MuiAppBar-root MuiAppBar-colorPrimary MuiAppBar-positionStatic css-1x7skt0"><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular css-i6s8oy"><div class="css-ad3hhb"></div><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit MuiIconButton-sizeLarge css-1l1167e" tabindex="0" type="button" aria-label="Menu"><span class="MuiBadge-root BaseBadge-root css-1rzb3uu"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="MenuIcon"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg><span class="MuiBadge-badge MuiBadge-standard MuiBadge-invisible MuiBadge-anchorOriginTopRight MuiBadge-anchorOriginTopRightRectangular MuiBadge-overlapRectangular BaseBadge-badge BaseBadge-invisible css-1mcnwcn"></span></span></button><p class="MuiTypography-root MuiTypography-body1 css-1ikde92" type="title"><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit css-b7766g" tabindex="0" type="button"><a href="/">Home</a></button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit css-b7766g" tabindex="0" type="button"><a href="/blogs">Blog</a></button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit css-b7766g" tabindex="0" type="button"><a href="/presentations">Presentation</a></button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit css-b7766g" tabindex="0" type="button"><a href="/tools">Tool</a></button></p></div></header><section class="css-xxwux"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation4 css-gnirli"><header><h1 class="MuiTypography-root MuiTypography-body1 css-9l3uo3">Using Web Cryptography API</h1><div class="MuiTypography-root MuiTypography-body1 css-9l3uo3">Author:<!-- -->Gao</div><div class="MuiTypography-root MuiTypography-body1 css-9l3uo3">Created At:<!-- -->2022-07-07</div></header><hr class="MuiDivider-root MuiDivider-fullWidth css-39bbo6"/><section class="MuiTypography-root MuiTypography-body1 blog-content css-9l3uo3"><div class="css-1xqzmcn"><p>Today, when I check security alerts from github code scanning alerts.</p>
<p>I see one of them are an issue need to fix.</p>
<p>It is the cryptography problem, that in javascript Math.random is a pseudo random number generator and can be easy guessed.</p>
<p>So I have to fix this issue in my code.</p>
<p>I check the code, and that most of random number is not used in crptography, they only for random select an object.</p>
<p>But one utils that I need to fix is the old createUUID utils, it is written in pure javascript, it inplemenet the algorithms from rfc4122.</p>
<p>Now in javascript, we can use the new crypt API.</p>
<h3>Web Crypto API</h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Crypto">MDN link</a></p>
<p>The Web Crypto API is an interface allowing a script to use cryptographic primitives in order to build systems using cryptography.</p>
<h4>Interfaces</h4>
<p>Some browsers implemented an interface called Crypto without having it well defined or being cryptographically sound.
In order to avoid confusion, methods and properties of this interface have been removed from browsers implementing the Web Crypto API,
and all Web Crypto API methods are available on a new interface: SubtleCrypto.
The Crypto.subtle property gives access to an object implementing it.</p>
<h3>Crypto</h3>
<p>The <code>Crypto</code> interface represents basic cryptography features available in the current context.
It allows access to a cryptographically strong random number generator and to cryptographic primitives.</p>
<pre><code class="hljs language-maxima">  Note: This <span class="hljs-built_in">feature</span> <span class="hljs-built_in">is</span> available <span class="hljs-keyword">in</span> Web Workers
</code></pre>
<p>The <code>Web Crypto API</code> is accessed through the global <code>crypto</code> property, which is a <code>Crypto</code> object.</p>
<h4>Properties</h4>
<p>This interface implements properties defined on RandomSource.</p>
<p>Crypto.subtle Read only Secure context
Returns a SubtleCrypto object providing access to common cryptographic primitives, like hashing, signing, encryption, or decryption.</p>
<h4>Methods</h4>
<p>This interface implements methods defined on <code>RandomSource</code>.</p>
<h5><code>Crypto.getRandomValues()</code></h5>
<p>Fills the passed <code>TypedArray</code> with cryptographically sound random values.</p>
<h5><code>Crypto.randomUUID()</code></h5>
<p>Returns a randomly generated, 36 character long v4 UUID.</p>
<h4>Usage notes</h4>
<p>You should avoid using the Web Crypto API on insecure contexts,
even though the Crypto interface is present on insecure contexts, as is the <code>crypto</code> property.
In addition, the Crypto method <code>getRandomValues()</code> is available on insecure contexts,
but the <code>subtle</code> property is not.</p>
<p>In general, you probably should just treat Crypto as available only on secure contexts.</p>
<h4>Specifications</h4>
<p><strong>Specification</strong></p>
<ul>
<li><a href="https://w3c.github.io/webcrypto/#crypto-interface">Web Cryptography API #crypto-interface</a></li>
</ul></div></section></div></section><footer style="margin-top:0" class="css-6haedj"><div class="container"><span id="icp-info" class="css-sfxrzk">京ICP备20014476号-2</span><span>Copyright © 2017-2022 GSMLG - Powered by GSMLG Web.</span></div></footer></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"using-web-cryptocraphy-api","blog":{"id":75,"slug":"using-web-cryptocraphy-api","title":"Using Web Cryptography API","date":"2022-07-07","author":"Gao","content":"Today, when I check security alerts from github code scanning alerts.\n\nI see one of them are an issue need to fix.\n\nIt is the cryptography problem, that in javascript Math.random is a pseudo random number generator and can be easy guessed.\n\nSo I have to fix this issue in my code.\n\nI check the code, and that most of random number is not used in crptography, they only for random select an object.\n\nBut one utils that I need to fix is the old createUUID utils, it is written in pure javascript, it inplemenet the algorithms from rfc4122.\n\nNow in javascript, we can use the new crypt API.\n\n### Web Crypto API\n\n[MDN link](https://developer.mozilla.org/en-US/docs/Web/API/Crypto)\n\nThe Web Crypto API is an interface allowing a script to use cryptographic primitives in order to build systems using cryptography.\n\n#### Interfaces\n\nSome browsers implemented an interface called Crypto without having it well defined or being cryptographically sound. \nIn order to avoid confusion, methods and properties of this interface have been removed from browsers implementing the Web Crypto API, \nand all Web Crypto API methods are available on a new interface: SubtleCrypto. \nThe Crypto.subtle property gives access to an object implementing it.\n\n### Crypto\n\nThe `Crypto` interface represents basic cryptography features available in the current context. \nIt allows access to a cryptographically strong random number generator and to cryptographic primitives.\n\n      Note: This feature is available in Web Workers\n\nThe `Web Crypto API` is accessed through the global `crypto` property, which is a `Crypto` object.\n\n#### Properties\n\nThis interface implements properties defined on RandomSource.\n\nCrypto.subtle Read only Secure context\nReturns a SubtleCrypto object providing access to common cryptographic primitives, like hashing, signing, encryption, or decryption.\n\n#### Methods\n\nThis interface implements methods defined on `RandomSource`.\n\n##### `Crypto.getRandomValues()`\n\nFills the passed `TypedArray` with cryptographically sound random values.\n\n##### `Crypto.randomUUID()`\n\nReturns a randomly generated, 36 character long v4 UUID.\n\n#### Usage notes\n\nYou should avoid using the Web Crypto API on insecure contexts, \neven though the Crypto interface is present on insecure contexts, as is the `crypto` property. \nIn addition, the Crypto method `getRandomValues()` is available on insecure contexts, \nbut the `subtle` property is not.\n\nIn general, you probably should just treat Crypto as available only on secure contexts.\n\n#### Specifications\n\n**Specification**\n\n- [Web Cryptography API #crypto-interface](https://w3c.github.io/webcrypto/#crypto-interface)\n\n"},"lightCss":"pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-built_in,.hljs-class .hljs-title,.hljs-title.class_{color:#c18401}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}","darkCss":"pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-built_in,.hljs-class .hljs-title,.hljs-title.class_{color:#e6c07b}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}"},"__N_SSG":true},"page":"/blogs/[slug]","query":{"slug":"using-web-cryptocraphy-api"},"buildId":"SY-x_ik-yTnqXC5KhuEEd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>