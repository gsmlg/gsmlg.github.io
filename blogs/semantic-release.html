<!DOCTYPE html><html lang="en"><head><meta name="theme-color" content="#1976d2"/><meta charSet="utf-8"/><meta name="viewport" content="minimum-scale=1, initial-scale=1, width=device-width"/><title>è¯­ä¹‰åŒ–ç‰ˆæœ¬å‘å¸ƒ</title><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/f6fff7f38d0ed3d106d5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f6fff7f38d0ed3d106d5.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-4de7bd85a1856dba1c5b.js" defer=""></script><script src="/_next/static/chunks/framework-2191d16384373197bc0a.js" defer=""></script><script src="/_next/static/chunks/main-1f2c591c5d3bfcfc95e6.js" defer=""></script><script src="/_next/static/chunks/pages/_app-3edb49d0ad3e50a49500.js" defer=""></script><script src="/_next/static/chunks/880-f1e5c64c8ab4bfd01a1e.js" defer=""></script><script src="/_next/static/chunks/422-b41d874f6ec8aa2163eb.js" defer=""></script><script src="/_next/static/chunks/pages/blogs/%5Bslug%5D-512fb50ee27fe1d6bf12.js" defer=""></script><script src="/_next/static/lNHQf-qEKZsFQCCKzYVoG/_buildManifest.js" defer=""></script><script src="/_next/static/lNHQf-qEKZsFQCCKzYVoG/_ssgManifest.js" defer=""></script><style data-emotion="css "></style></head><body><div id="__next"><style data-emotion="css-global o6gwfi">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><section class="css-1vqbnt3"><header class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation4 MuiAppBar-root MuiAppBar-colorPrimary MuiAppBar-positionStatic css-1x7skt0"><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular css-191lty2"><div status="[object Object]" class="css-ad3hhb"></div><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit MuiIconButton-sizeLarge css-1l1167e" tabindex="0" type="button" aria-label="Menu"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv" focusable="false" viewBox="0 0 24 24" aria-hidden="true" data-testid="MenuIcon"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button><p class="MuiTypography-root MuiTypography-body1 css-1ikde92" type="title"><button class="MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButtonBase-root css-b7766g" tabindex="0" type="button"><a href="/">Home</a></button><button class="MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButtonBase-root css-b7766g" tabindex="0" type="button"><a href="/blogs">Blog</a></button><button class="MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButtonBase-root css-b7766g" tabindex="0" type="button"><a href="/presentations">Presentation</a></button><button class="MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButtonBase-root css-b7766g" tabindex="0" type="button"><a href="/tools">Tool</a></button><button class="MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButtonBase-root css-b7766g" tabindex="0" type="button"><a href="/games">Game</a></button></p></div></header><section class="css-xxwux"><div class="MuiPaper-root MuiPaper-elevation MuiPaper-rounded MuiPaper-elevation4 css-gnirli"><header><h1 class="MuiTypography-root MuiTypography-body1 css-9l3uo3">è¯­ä¹‰åŒ–ç‰ˆæœ¬å‘å¸ƒ</h1><div class="MuiTypography-root MuiTypography-body1 css-9l3uo3">Author:<!-- -->Gao</div><div class="MuiTypography-root MuiTypography-body1 css-9l3uo3">Created At:<!-- -->2021-02-25</div></header><hr class="MuiDivider-root MuiDivider-fullWidth css-39bbo6"/><section class="MuiTypography-root MuiTypography-body1 blog-content css-9l3uo3"><h1>Using semantic release</h1>
<p>åœ¨ä»‹ç»<code>semantic release</code>ä¹‹å‰, é¦–å…ˆä»‹ç»<code>semantic versioning</code></p>
<h2>Semantic Versioning</h2>
<p>è¯­ä¹‰åŒ–ç‰ˆæœ¬ <a href="https://semver.org">é“¾æ¥</a></p>
<h3>æ‘˜è¦</h3>
<p>ç‰ˆæœ¬æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼Œç‰ˆæœ¬å·é€’å¢è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä¸»ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ï¼Œ</li>
<li>æ¬¡ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ï¼Œ</li>
<li>ä¿®è®¢å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ã€‚å…ˆè¡Œç‰ˆæœ¬å·åŠç‰ˆæœ¬ç¼–è¯‘å…ƒæ•°æ®å¯ä»¥åŠ åˆ°â€œä¸»ç‰ˆæœ¬
å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·â€çš„åé¢ï¼Œä½œä¸ºå»¶ä¼¸ã€‚</li>
</ol>
<h3>ç®€ä»‹</h3>
<p>åœ¨è½¯ä»¶ç®¡ç†çš„é¢†åŸŸé‡Œå­˜åœ¨ç€è¢«ç§°ä½œâ€œä¾èµ–åœ°ç‹±â€çš„æ­»äº¡ä¹‹è°·ï¼Œç³»ç»Ÿè§„æ¨¡è¶Šå¤§ï¼ŒåŠ å…¥çš„åŒ…è¶Šå¤šï¼Œ
ä½ å°±è¶Šæœ‰å¯èƒ½åœ¨æœªæ¥çš„æŸä¸€å¤©å‘ç°è‡ªå·±å·²æ·±é™·ç»æœ›ä¹‹ä¸­ã€‚åœ¨ä¾èµ–é«˜çš„ç³»ç»Ÿä¸­å‘å¸ƒæ–°ç‰ˆæœ¬åŒ…å¯
èƒ½å¾ˆå¿«ä¼šæˆä¸ºå™©æ¢¦ã€‚å¦‚æœä¾èµ–å…³ç³»è¿‡é«˜ï¼Œå¯èƒ½é¢ä¸´ç‰ˆæœ¬æ§åˆ¶è¢«é”æ­»çš„é£é™©ï¼ˆå¿…é¡»å¯¹æ¯ä¸€ä¸ªä¾
èµ–åŒ…æ”¹ç‰ˆæ‰èƒ½å®ŒæˆæŸæ¬¡å‡çº§ï¼‰ã€‚è€Œå¦‚æœä¾èµ–å…³ç³»è¿‡äºæ¾æ•£ï¼Œåˆå°†æ— æ³•é¿å…ç‰ˆæœ¬çš„æ··ä¹±ï¼ˆå‡è®¾
å…¼å®¹äºæœªæ¥çš„å¤šä¸ªç‰ˆæœ¬å·²è¶…å‡ºäº†åˆç†æ•°é‡ï¼‰ã€‚å½“ä½ ä¸“æ¡ˆçš„è¿›å±•å› ä¸ºç‰ˆæœ¬ä¾èµ–è¢«é”æ­»æˆ–ç‰ˆæœ¬æ··
ä¹±å˜å¾—ä¸å¤Ÿç®€ä¾¿å’Œå¯é ï¼Œå°±æ„å‘³ç€ä½ æ­£å¤„äºä¾èµ–åœ°ç‹±ä¹‹ä¸­ã€‚ä½œä¸ºè¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€ï¼Œ
æˆ‘æè®®ç”¨ä¸€ç»„ç®€å•çš„è§„åˆ™åŠæ¡ä»¶æ¥çº¦æŸç‰ˆæœ¬å·çš„é…ç½®å’Œå¢é•¿ã€‚è¿™äº›è§„åˆ™æ˜¯æ ¹æ®ï¼ˆä½†ä¸å±€é™äº
ï¼‰å·²ç»è¢«å„ç§å°é—­ã€å¼€æ”¾æºç è½¯ä»¶æ‰€å¹¿æ³›ä½¿ç”¨çš„æƒ¯ä¾‹æ‰€è®¾è®¡ã€‚ä¸ºäº†è®©è¿™å¥—ç†è®ºè¿ä½œï¼Œä½ å¿…é¡»
å…ˆæœ‰å®šä¹‰å¥½çš„å…¬å…± API ã€‚è¿™å¯ä»¥é€è¿‡æ–‡ä»¶å®šä¹‰æˆ–ä»£ç å¼ºåˆ¶è¦æ±‚æ¥å®ç°ã€‚æ— è®ºå¦‚ä½•ï¼Œè¿™å¥—
API çš„æ¸…æ¥šæ˜äº†æ˜¯ååˆ†é‡è¦çš„ã€‚ä¸€æ—¦ä½ å®šä¹‰äº†å…¬å…± APIï¼Œä½ å°±å¯ä»¥é€è¿‡ä¿®æ”¹ç›¸åº”çš„ç‰ˆæœ¬å·æ¥
å‘å¤§å®¶è¯´æ˜ä½ çš„ä¿®æ”¹ã€‚è€ƒè™‘ä½¿ç”¨è¿™æ ·çš„ç‰ˆæœ¬å·æ ¼å¼ï¼šX.Y.Z ï¼ˆä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼‰
ä¿®å¤é—®é¢˜ä½†ä¸å½±å“ API æ—¶ï¼Œé€’å¢ä¿®è®¢å·ï¼›API ä¿æŒå‘ä¸‹å…¼å®¹çš„æ–°å¢åŠä¿®æ”¹æ—¶ï¼Œé€’å¢æ¬¡ç‰ˆæœ¬
å·ï¼›è¿›è¡Œä¸å‘ä¸‹å…¼å®¹çš„ä¿®æ”¹æ—¶ï¼Œé€’å¢ä¸»ç‰ˆæœ¬å·ã€‚æˆ‘ç§°è¿™å¥—ç³»ç»Ÿä¸ºâ€œè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶â€ï¼Œåœ¨è¿™
å¥—çº¦å®šä¸‹ï¼Œç‰ˆæœ¬å·åŠå…¶æ›´æ–°æ–¹å¼åŒ…å«äº†ç›¸é‚»ç‰ˆæœ¬é—´çš„åº•å±‚ä»£ç å’Œä¿®æ”¹å†…å®¹çš„ä¿¡æ¯ã€‚</p>
<h3>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ</h3>
<p>è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„æˆ–è€…é©å‘½æ€§çš„æƒ³æ³•ã€‚å®é™…ä¸Šï¼Œä½ å¯èƒ½å·²ç»åœ¨åšä¸€äº›è¿‘ä¼¼çš„äº‹æƒ…äº†ã€‚é—®é¢˜åœ¨
äºåªæ˜¯â€œè¿‘ä¼¼â€è¿˜ä¸å¤Ÿã€‚å¦‚æœæ²¡æœ‰æŸä¸ªæ­£å¼çš„è§„èŒƒå¯å¾ªï¼Œç‰ˆæœ¬å·å¯¹äºä¾èµ–çš„ç®¡ç†å¹¶æ— å®è´¨æ„ä¹‰
ã€‚å°†ä¸Šè¿°çš„æƒ³æ³•å‘½åå¹¶ç»™äºˆæ¸…æ¥šçš„å®šä¹‰ï¼Œè®©ä½ å¯¹è½¯ä»¶ä½¿ç”¨è€…ä¼ è¾¾æ„å‘å˜å¾—å®¹æ˜“ã€‚ä¸€æ—¦è¿™äº›æ„
å‘å˜å¾—æ¸…æ¥šï¼Œå¼¹æ€§ï¼ˆä½†åˆä¸ä¼šå¤ªå¼¹æ€§ï¼‰çš„ä¾èµ–è§„èŒƒå°±èƒ½è¾¾æˆã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­å°±å¯ä»¥å±•ç¤ºè¯­
ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶å¦‚ä½•è®©ä¾èµ–åœ°ç‹±æˆä¸ºè¿‡å»ã€‚å‡è®¾æœ‰ä¸ªåä¸ºâ€œæ•‘ç«è½¦â€çš„å‡½å¼åº“ï¼Œå®ƒéœ€è¦å¦ä¸€ä¸ª
åä¸ºâ€œæ¢¯å­â€å¹¶å·²ç»æœ‰ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶çš„åŒ…ã€‚å½“æ•‘ç«è½¦åˆ›å»ºæ—¶ï¼Œæ¢¯å­çš„ç‰ˆæœ¬å·ä¸º 3.1.0ã€‚
å› ä¸ºæ•‘ç«è½¦ä½¿ç”¨äº†ä¸€äº›ç‰ˆæœ¬ 3.1.0 æ‰€æ–°å¢çš„åŠŸèƒ½ï¼Œ ä½ å¯ä»¥æ”¾å¿ƒåœ°æŒ‡å®šä¾èµ–äºæ¢¯å­çš„ç‰ˆæœ¬å·
å¤§ç­‰äº 3.1.0 ä½†å°äº 4.0.0ã€‚è¿™æ ·ï¼Œå½“æ¢¯å­ç‰ˆæœ¬ 3.1.1 å’Œ 3.2.0 å‘å¸ƒæ—¶ï¼Œä½ å¯ä»¥å°†ç›´æ¥
å®ƒä»¬çº³å…¥ä½ çš„åŒ…ç®¡ç†ç³»ç»Ÿï¼Œå› ä¸ºå®ƒä»¬èƒ½ä¸åŸæœ‰ä¾èµ–çš„è½¯ä»¶å…¼å®¹ã€‚ä½œä¸ºä¸€ä½è´Ÿè´£ä»»çš„å¼€å‘è€…ï¼Œ
ä½ ç†å½“ç¡®ä¿æ¯æ¬¡åŒ…å‡çº§çš„è¿ä½œä¸ç‰ˆæœ¬å·çš„è¡¨è¿°ä¸€è‡´ã€‚ç°å®ä¸–ç•Œæ˜¯å¤æ‚çš„ï¼Œæˆ‘ä»¬é™¤äº†æé«˜è­¦è§‰
å¤–èƒ½åšçš„ä¸å¤šã€‚ä½ æ‰€èƒ½åšçš„å°±æ˜¯è®©è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ä¸ºä½ æä¾›ä¸€ä¸ªå¥å…¨çš„æ–¹å¼æ¥å‘è¡Œä»¥åŠå‡
çº§åŒ…ï¼Œè€Œæ— éœ€æ¨å‡ºæ–°çš„ä¾èµ–åŒ…ï¼ŒèŠ‚çœä½ çš„æ—¶é—´åŠçƒ¦æ¼ã€‚å¦‚æœä½ å¯¹æ­¤è®¤åŒï¼Œå¸Œæœ›ç«‹å³å¼€å§‹ä½¿ç”¨
è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼Œä½ åªéœ€å£°æ˜ä½ çš„å‡½å¼åº“æ­£åœ¨ä½¿ç”¨å®ƒå¹¶éµå¾ªè¿™äº›è§„åˆ™å°±å¯ä»¥äº†ã€‚è¯·åœ¨ä½ çš„
README æ–‡ä»¶ä¸­ä¿ç•™æ­¤é¡µè¿ç»“ï¼Œè®©åˆ«äººä¹ŸçŸ¥é“è¿™äº›è§„åˆ™å¹¶ä»ä¸­å—ç›Šã€‚</p>
<h2>Semantic Release</h2>
<p>Semantic release, ä¸­æ–‡å¤§æ„æ˜¯è¯­ä¹‰å‘å¸ƒ, ä½œç”¨æ˜¯å®ç°å®Œå…¨è‡ªåŠ¨åŒ–çš„ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒ.</p>
<p><code>Semantic-release</code> ä¼šè‡ªåŠ¨å®Œæˆæ•´ä¸ªå‘å¸ƒæµç¨‹, åŒ…æ‹¬: è‡ªåŠ¨æŸ¥æ˜ä¸‹ä¸€ä¸ªç‰ˆæœ¬å·, ç”Ÿæˆ
release note å’Œ è¿›è¡ŒåŒ…çš„å‘å¸ƒ.</p>
<p>è¿™æ¶ˆé™¤äº†äººç±»æƒ…æ„Ÿå’Œç‰ˆæœ¬å·ä¹‹é—´çš„ç›´æ¥è”ç³», ä¸¥æ ¼çš„éµå¾ª<code>Semantic Versioning</code> è§„èŒƒ.</p>
<p><img src="semantic-release/kill-all-humans.png" alt="kill-all-humans"/></p>
<h3>äº®ç‚¹</h3>
<ul>
<li>å®Œå…¨è‡ªåŠ¨å‘å¸ƒ</li>
<li>ç¡®ä¿è¯­ä¹‰ç‰ˆæœ¬(Semantic Versioning)è§„èŒƒ</li>
<li>æ–°ç‰¹æ€§å’Œä¿®å¤å¯ä»¥ç«‹å³å¯¹ç”¨æˆ·å¯ç”¨</li>
<li>æé†’ç»´æŠ¤è€…å’Œç”¨æˆ·æ–°çš„å‘å¸ƒ</li>
<li>åœ¨ä»£ç åº“ä¸­ä½¿ç”¨æ ¼å¼åŒ–çš„æäº¤ä¿¡æ¯å˜åŒ–å¹¶ç”Ÿæˆæ–‡æ¡£</li>
<li>åŸºäº git merges å¯ä»¥åˆ›å»ºä¸åŒçš„å‘å¸ƒé¢‘é“</li>
<li>å’Œ CI å·¥ä½œæµé›†æˆ</li>
<li>å’Œæ‰‹åŠ¨å‘å¸ƒç›¸æ¯”é¿å…æ½œåœ¨çš„è¯´æ˜é”™è¯¯</li>
<li>ç»ç”±æ’ä»¶æ”¯æŒä»»ä½•ç‰ˆæœ¬èƒ½ç®¡ç†å’Œè¯­è¨€</li>
<li>ä½¿ç”¨<code>å…±äº«é…ç½®(shareable configurations)</code>æ¥æ–¹ä¾¿å’Œå¤ç”¨é…ç½®</li>
</ul>
<h3>How it works?</h3>
<h4>æäº¤ä¿¡æ¯æ ¼å¼ (commit message format)</h4>
<p><code>Semantic Release</code>ä½¿ç”¨ç”¨æˆ·æäº¤ä¿¡æ¯(commit message) æŸ¥å‡ºæ›´æ–°å˜åŒ–çš„ç±»å‹. é€šè¿‡
commit message çš„æ ¼å¼çº¦å®š, semantic-release è‡ªåŠ¨æŸ¥å‡ºä¸‹ä¸€ä¸ª semantic version ç‰ˆæœ¬
å·, ç”Ÿæˆæ›´æ–°æ—¥å¿—å¹¶å‘å¸ƒç‰ˆæœ¬.</p>
<p>Semantic-release é»˜è®¤ä½¿ç”¨ Angular Commit message conventions. æäº¤ä¿¡æ¯æ ¼å¼å¯ä»¥é€š
è¿‡ä¿®
æ”¹<code>@semantic-release/commit-analyzer</code>å’Œ<code>@semantic-release/release-notes-generator</code>çš„<code>preset</code>å’Œ<code>config</code>é€‰
é¡¹æ¥æ”¹å˜.</p>
<p>é€šè¿‡åƒ commitzen å’Œ commitlint ä¹‹ç±»çš„å·¥å…·å¯ä»¥å¸®åŠ©ç¡®ä¿éªŒè¯æäº¤ä¿¡æ¯ç¬¦åˆçº¦å®š.</p>
<p>æäº¤ç¤ºä¾‹:</p>
<pre><code class="language-markdown">fix(pencil): stop graphite breaking when too much pressure applied Patch Release
feat(pencil): add &#x27;graphiteWidth&#x27; option Minor Feature Release perf(pencil):
remove graphiteWidth option Major Breaking Release

BREAKING CHANGE: The graphiteWidth option has been removed. The default graphite
width of 10mm is always used for performance reasons.
</code></pre>
<h3>ç°å®ä¸­çš„é¡¹ç›®ç¤ºä¾‹</h3>
<pre><code class="language-yaml">name: nodejs-scripts-validate-and-release
on:
  push:
    paths:
      - &#x27;nodejs/packages/scripts/**&#x27;
      - &#x27;.github/workflows/nodejs-scripts-validate-and-release.yml&#x27;
    branches:
      - &#x27;+([0-9])?(.{+([0-9]),x}).x&#x27;
      - &#x27;master&#x27;
      - &#x27;next&#x27;
      - &#x27;next-major&#x27;
      - &#x27;beta&#x27;
      - &#x27;alpha&#x27;
      - &#x27;!all-contributors/**&#x27;
  pull_request: {}
jobs:
  main:
    # ignore all-contributors PRs
    if: ${{ !contains(github.head_ref, &#x27;all-contributors&#x27;) }}
    strategy:
      matrix:
        os: [ubuntu-latest, macos-latest]
        node: [12, 14, 15]
    runs-on: ${{ matrix.os }}
    steps:
      - name: ğŸ›‘ Cancel Previous Runs
        uses: styfle/cancel-workflow-action@0.6.0
        with:
          access_token: ${{ secrets.GITHUB_TOKEN }}

      - name: â¬‡ï¸ Checkout repo
        uses: actions/checkout@v2

      - name: â” Setup node
        uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}

      - name: ğŸ“¥ Download deps
        uses: bahmutov/npm-install@v1
        with:
          useLockFile: false
          working-directory: &#x27;nodejs/packages/scripts&#x27;

      - name: â–¶ï¸ Run validate script
        working-directory: &#x27;nodejs/packages/scripts&#x27;
        run: npm run validate

      - name: â¬†ï¸ Upload coverage report
        uses: codecov/codecov-action@v1
        with:
          directory: &#x27;nodejs/packages/scripts/coverage/&#x27;

  release:
    needs: main
    runs-on: ubuntu-latest
    if:
      ${{ github.repository == &#x27;gsmlg/Foundation&#x27; &amp;&amp;
      contains(&#x27;refs/heads/master,refs/heads/beta,refs/heads/next,refs/heads/alpha&#x27;,
      github.ref) &amp;&amp; github.event_name == &#x27;push&#x27; }}
    steps:
      - name: ğŸ›‘ Cancel Previous Runs
        uses: styfle/cancel-workflow-action@0.6.0
        with:
          access_token: ${{ secrets.GITHUB_TOKEN }}

      - name: â¬‡ï¸ Checkout repo
        uses: actions/checkout@v2

      - name: â” Setup node
        uses: actions/setup-node@v1
        with:
          node-version: 14

      - name: ğŸ“¥ Download deps
        uses: bahmutov/npm-install@v1
        with:
          useLockFile: false
          working-directory: &#x27;nodejs/packages/scripts&#x27;

      - name: ğŸ— Run build script
        working-directory: &#x27;nodejs/packages/scripts&#x27;
        run: npm run build

      - name: ğŸš€ Release
        uses: gsmlg/semantic-release-action@v2
        with:
          working-directory: &#x27;nodejs/packages/scripts&#x27;
          semantic_version: 17
          branches: |
            [
              &#x27;+([0-9])?(.{+([0-9]),x}).x&#x27;,
              &#x27;master&#x27;,
              &#x27;next&#x27;,
              &#x27;next-major&#x27;,
              {name: &#x27;beta&#x27;, prerelease: true},
              {name: &#x27;alpha&#x27;, prerelease: true}
            ]
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
</code></pre></section></div></section><footer class="css-6haedj"><div class="container"><span>Copyright Â© 2017-2021 GSMLG - Powered by GSMLG Web.</span></div></footer></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"semantic-release","blog":{"id":51,"name":"semantic-release","title":"è¯­ä¹‰åŒ–ç‰ˆæœ¬å‘å¸ƒ","date":"2021-02-25","author":"Gao","content":"# Using semantic release\n\nåœ¨ä»‹ç»`semantic release`ä¹‹å‰, é¦–å…ˆä»‹ç»`semantic versioning`\n\n## Semantic Versioning\n\nè¯­ä¹‰åŒ–ç‰ˆæœ¬ [é“¾æ¥](https://semver.org)\n\n### æ‘˜è¦\n\nç‰ˆæœ¬æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼Œç‰ˆæœ¬å·é€’å¢è§„åˆ™å¦‚ä¸‹ï¼š\n\n1. ä¸»ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹ï¼Œ\n2. æ¬¡ç‰ˆæœ¬å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ï¼Œ\n3. ä¿®è®¢å·ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ã€‚å…ˆè¡Œç‰ˆæœ¬å·åŠç‰ˆæœ¬ç¼–è¯‘å…ƒæ•°æ®å¯ä»¥åŠ åˆ°â€œä¸»ç‰ˆæœ¬\n   å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·â€çš„åé¢ï¼Œä½œä¸ºå»¶ä¼¸ã€‚\n\n### ç®€ä»‹\n\nåœ¨è½¯ä»¶ç®¡ç†çš„é¢†åŸŸé‡Œå­˜åœ¨ç€è¢«ç§°ä½œâ€œä¾èµ–åœ°ç‹±â€çš„æ­»äº¡ä¹‹è°·ï¼Œç³»ç»Ÿè§„æ¨¡è¶Šå¤§ï¼ŒåŠ å…¥çš„åŒ…è¶Šå¤šï¼Œ\nä½ å°±è¶Šæœ‰å¯èƒ½åœ¨æœªæ¥çš„æŸä¸€å¤©å‘ç°è‡ªå·±å·²æ·±é™·ç»æœ›ä¹‹ä¸­ã€‚åœ¨ä¾èµ–é«˜çš„ç³»ç»Ÿä¸­å‘å¸ƒæ–°ç‰ˆæœ¬åŒ…å¯\nèƒ½å¾ˆå¿«ä¼šæˆä¸ºå™©æ¢¦ã€‚å¦‚æœä¾èµ–å…³ç³»è¿‡é«˜ï¼Œå¯èƒ½é¢ä¸´ç‰ˆæœ¬æ§åˆ¶è¢«é”æ­»çš„é£é™©ï¼ˆå¿…é¡»å¯¹æ¯ä¸€ä¸ªä¾\nèµ–åŒ…æ”¹ç‰ˆæ‰èƒ½å®ŒæˆæŸæ¬¡å‡çº§ï¼‰ã€‚è€Œå¦‚æœä¾èµ–å…³ç³»è¿‡äºæ¾æ•£ï¼Œåˆå°†æ— æ³•é¿å…ç‰ˆæœ¬çš„æ··ä¹±ï¼ˆå‡è®¾\nå…¼å®¹äºæœªæ¥çš„å¤šä¸ªç‰ˆæœ¬å·²è¶…å‡ºäº†åˆç†æ•°é‡ï¼‰ã€‚å½“ä½ ä¸“æ¡ˆçš„è¿›å±•å› ä¸ºç‰ˆæœ¬ä¾èµ–è¢«é”æ­»æˆ–ç‰ˆæœ¬æ··\nä¹±å˜å¾—ä¸å¤Ÿç®€ä¾¿å’Œå¯é ï¼Œå°±æ„å‘³ç€ä½ æ­£å¤„äºä¾èµ–åœ°ç‹±ä¹‹ä¸­ã€‚ä½œä¸ºè¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€ï¼Œ\næˆ‘æè®®ç”¨ä¸€ç»„ç®€å•çš„è§„åˆ™åŠæ¡ä»¶æ¥çº¦æŸç‰ˆæœ¬å·çš„é…ç½®å’Œå¢é•¿ã€‚è¿™äº›è§„åˆ™æ˜¯æ ¹æ®ï¼ˆä½†ä¸å±€é™äº\nï¼‰å·²ç»è¢«å„ç§å°é—­ã€å¼€æ”¾æºç è½¯ä»¶æ‰€å¹¿æ³›ä½¿ç”¨çš„æƒ¯ä¾‹æ‰€è®¾è®¡ã€‚ä¸ºäº†è®©è¿™å¥—ç†è®ºè¿ä½œï¼Œä½ å¿…é¡»\nå…ˆæœ‰å®šä¹‰å¥½çš„å…¬å…± API ã€‚è¿™å¯ä»¥é€è¿‡æ–‡ä»¶å®šä¹‰æˆ–ä»£ç å¼ºåˆ¶è¦æ±‚æ¥å®ç°ã€‚æ— è®ºå¦‚ä½•ï¼Œè¿™å¥—\nAPI çš„æ¸…æ¥šæ˜äº†æ˜¯ååˆ†é‡è¦çš„ã€‚ä¸€æ—¦ä½ å®šä¹‰äº†å…¬å…± APIï¼Œä½ å°±å¯ä»¥é€è¿‡ä¿®æ”¹ç›¸åº”çš„ç‰ˆæœ¬å·æ¥\nå‘å¤§å®¶è¯´æ˜ä½ çš„ä¿®æ”¹ã€‚è€ƒè™‘ä½¿ç”¨è¿™æ ·çš„ç‰ˆæœ¬å·æ ¼å¼ï¼šX.Y.Z ï¼ˆä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼‰\nä¿®å¤é—®é¢˜ä½†ä¸å½±å“ API æ—¶ï¼Œé€’å¢ä¿®è®¢å·ï¼›API ä¿æŒå‘ä¸‹å…¼å®¹çš„æ–°å¢åŠä¿®æ”¹æ—¶ï¼Œé€’å¢æ¬¡ç‰ˆæœ¬\nå·ï¼›è¿›è¡Œä¸å‘ä¸‹å…¼å®¹çš„ä¿®æ”¹æ—¶ï¼Œé€’å¢ä¸»ç‰ˆæœ¬å·ã€‚æˆ‘ç§°è¿™å¥—ç³»ç»Ÿä¸ºâ€œè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶â€ï¼Œåœ¨è¿™\nå¥—çº¦å®šä¸‹ï¼Œç‰ˆæœ¬å·åŠå…¶æ›´æ–°æ–¹å¼åŒ…å«äº†ç›¸é‚»ç‰ˆæœ¬é—´çš„åº•å±‚ä»£ç å’Œä¿®æ”¹å†…å®¹çš„ä¿¡æ¯ã€‚\n\n### ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ\n\nè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„æˆ–è€…é©å‘½æ€§çš„æƒ³æ³•ã€‚å®é™…ä¸Šï¼Œä½ å¯èƒ½å·²ç»åœ¨åšä¸€äº›è¿‘ä¼¼çš„äº‹æƒ…äº†ã€‚é—®é¢˜åœ¨\näºåªæ˜¯â€œè¿‘ä¼¼â€è¿˜ä¸å¤Ÿã€‚å¦‚æœæ²¡æœ‰æŸä¸ªæ­£å¼çš„è§„èŒƒå¯å¾ªï¼Œç‰ˆæœ¬å·å¯¹äºä¾èµ–çš„ç®¡ç†å¹¶æ— å®è´¨æ„ä¹‰\nã€‚å°†ä¸Šè¿°çš„æƒ³æ³•å‘½åå¹¶ç»™äºˆæ¸…æ¥šçš„å®šä¹‰ï¼Œè®©ä½ å¯¹è½¯ä»¶ä½¿ç”¨è€…ä¼ è¾¾æ„å‘å˜å¾—å®¹æ˜“ã€‚ä¸€æ—¦è¿™äº›æ„\nå‘å˜å¾—æ¸…æ¥šï¼Œå¼¹æ€§ï¼ˆä½†åˆä¸ä¼šå¤ªå¼¹æ€§ï¼‰çš„ä¾èµ–è§„èŒƒå°±èƒ½è¾¾æˆã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­å°±å¯ä»¥å±•ç¤ºè¯­\nä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶å¦‚ä½•è®©ä¾èµ–åœ°ç‹±æˆä¸ºè¿‡å»ã€‚å‡è®¾æœ‰ä¸ªåä¸ºâ€œæ•‘ç«è½¦â€çš„å‡½å¼åº“ï¼Œå®ƒéœ€è¦å¦ä¸€ä¸ª\nåä¸ºâ€œæ¢¯å­â€å¹¶å·²ç»æœ‰ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶çš„åŒ…ã€‚å½“æ•‘ç«è½¦åˆ›å»ºæ—¶ï¼Œæ¢¯å­çš„ç‰ˆæœ¬å·ä¸º 3.1.0ã€‚\nå› ä¸ºæ•‘ç«è½¦ä½¿ç”¨äº†ä¸€äº›ç‰ˆæœ¬ 3.1.0 æ‰€æ–°å¢çš„åŠŸèƒ½ï¼Œ ä½ å¯ä»¥æ”¾å¿ƒåœ°æŒ‡å®šä¾èµ–äºæ¢¯å­çš„ç‰ˆæœ¬å·\nå¤§ç­‰äº 3.1.0 ä½†å°äº 4.0.0ã€‚è¿™æ ·ï¼Œå½“æ¢¯å­ç‰ˆæœ¬ 3.1.1 å’Œ 3.2.0 å‘å¸ƒæ—¶ï¼Œä½ å¯ä»¥å°†ç›´æ¥\nå®ƒä»¬çº³å…¥ä½ çš„åŒ…ç®¡ç†ç³»ç»Ÿï¼Œå› ä¸ºå®ƒä»¬èƒ½ä¸åŸæœ‰ä¾èµ–çš„è½¯ä»¶å…¼å®¹ã€‚ä½œä¸ºä¸€ä½è´Ÿè´£ä»»çš„å¼€å‘è€…ï¼Œ\nä½ ç†å½“ç¡®ä¿æ¯æ¬¡åŒ…å‡çº§çš„è¿ä½œä¸ç‰ˆæœ¬å·çš„è¡¨è¿°ä¸€è‡´ã€‚ç°å®ä¸–ç•Œæ˜¯å¤æ‚çš„ï¼Œæˆ‘ä»¬é™¤äº†æé«˜è­¦è§‰\nå¤–èƒ½åšçš„ä¸å¤šã€‚ä½ æ‰€èƒ½åšçš„å°±æ˜¯è®©è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ä¸ºä½ æä¾›ä¸€ä¸ªå¥å…¨çš„æ–¹å¼æ¥å‘è¡Œä»¥åŠå‡\nçº§åŒ…ï¼Œè€Œæ— éœ€æ¨å‡ºæ–°çš„ä¾èµ–åŒ…ï¼ŒèŠ‚çœä½ çš„æ—¶é—´åŠçƒ¦æ¼ã€‚å¦‚æœä½ å¯¹æ­¤è®¤åŒï¼Œå¸Œæœ›ç«‹å³å¼€å§‹ä½¿ç”¨\nè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼Œä½ åªéœ€å£°æ˜ä½ çš„å‡½å¼åº“æ­£åœ¨ä½¿ç”¨å®ƒå¹¶éµå¾ªè¿™äº›è§„åˆ™å°±å¯ä»¥äº†ã€‚è¯·åœ¨ä½ çš„\nREADME æ–‡ä»¶ä¸­ä¿ç•™æ­¤é¡µè¿ç»“ï¼Œè®©åˆ«äººä¹ŸçŸ¥é“è¿™äº›è§„åˆ™å¹¶ä»ä¸­å—ç›Šã€‚\n\n## Semantic Release\n\nSemantic release, ä¸­æ–‡å¤§æ„æ˜¯è¯­ä¹‰å‘å¸ƒ, ä½œç”¨æ˜¯å®ç°å®Œå…¨è‡ªåŠ¨åŒ–çš„ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒ.\n\n`Semantic-release` ä¼šè‡ªåŠ¨å®Œæˆæ•´ä¸ªå‘å¸ƒæµç¨‹, åŒ…æ‹¬: è‡ªåŠ¨æŸ¥æ˜ä¸‹ä¸€ä¸ªç‰ˆæœ¬å·, ç”Ÿæˆ\nrelease note å’Œ è¿›è¡ŒåŒ…çš„å‘å¸ƒ.\n\nè¿™æ¶ˆé™¤äº†äººç±»æƒ…æ„Ÿå’Œç‰ˆæœ¬å·ä¹‹é—´çš„ç›´æ¥è”ç³», ä¸¥æ ¼çš„éµå¾ª`Semantic Versioning` è§„èŒƒ.\n\n![kill-all-humans](semantic-release/kill-all-humans.png)\n\n### äº®ç‚¹\n\n- å®Œå…¨è‡ªåŠ¨å‘å¸ƒ\n- ç¡®ä¿è¯­ä¹‰ç‰ˆæœ¬(Semantic Versioning)è§„èŒƒ\n- æ–°ç‰¹æ€§å’Œä¿®å¤å¯ä»¥ç«‹å³å¯¹ç”¨æˆ·å¯ç”¨\n- æé†’ç»´æŠ¤è€…å’Œç”¨æˆ·æ–°çš„å‘å¸ƒ\n- åœ¨ä»£ç åº“ä¸­ä½¿ç”¨æ ¼å¼åŒ–çš„æäº¤ä¿¡æ¯å˜åŒ–å¹¶ç”Ÿæˆæ–‡æ¡£\n- åŸºäº git merges å¯ä»¥åˆ›å»ºä¸åŒçš„å‘å¸ƒé¢‘é“\n- å’Œ CI å·¥ä½œæµé›†æˆ\n- å’Œæ‰‹åŠ¨å‘å¸ƒç›¸æ¯”é¿å…æ½œåœ¨çš„è¯´æ˜é”™è¯¯\n- ç»ç”±æ’ä»¶æ”¯æŒä»»ä½•ç‰ˆæœ¬èƒ½ç®¡ç†å’Œè¯­è¨€\n- ä½¿ç”¨`å…±äº«é…ç½®(shareable configurations)`æ¥æ–¹ä¾¿å’Œå¤ç”¨é…ç½®\n\n### How it works?\n\n#### æäº¤ä¿¡æ¯æ ¼å¼ (commit message format)\n\n`Semantic Release`ä½¿ç”¨ç”¨æˆ·æäº¤ä¿¡æ¯(commit message) æŸ¥å‡ºæ›´æ–°å˜åŒ–çš„ç±»å‹. é€šè¿‡\ncommit message çš„æ ¼å¼çº¦å®š, semantic-release è‡ªåŠ¨æŸ¥å‡ºä¸‹ä¸€ä¸ª semantic version ç‰ˆæœ¬\nå·, ç”Ÿæˆæ›´æ–°æ—¥å¿—å¹¶å‘å¸ƒç‰ˆæœ¬.\n\nSemantic-release é»˜è®¤ä½¿ç”¨ Angular Commit message conventions. æäº¤ä¿¡æ¯æ ¼å¼å¯ä»¥é€š\nè¿‡ä¿®\næ”¹`@semantic-release/commit-analyzer`å’Œ`@semantic-release/release-notes-generator`çš„`preset`å’Œ`config`é€‰\né¡¹æ¥æ”¹å˜.\n\né€šè¿‡åƒ commitzen å’Œ commitlint ä¹‹ç±»çš„å·¥å…·å¯ä»¥å¸®åŠ©ç¡®ä¿éªŒè¯æäº¤ä¿¡æ¯ç¬¦åˆçº¦å®š.\n\næäº¤ç¤ºä¾‹:\n\n```markdown\nfix(pencil): stop graphite breaking when too much pressure applied Patch Release\nfeat(pencil): add 'graphiteWidth' option Minor Feature Release perf(pencil):\nremove graphiteWidth option Major Breaking Release\n\nBREAKING CHANGE: The graphiteWidth option has been removed. The default graphite\nwidth of 10mm is always used for performance reasons.\n```\n\n### ç°å®ä¸­çš„é¡¹ç›®ç¤ºä¾‹\n\n```yaml\nname: nodejs-scripts-validate-and-release\non:\n  push:\n    paths:\n      - 'nodejs/packages/scripts/**'\n      - '.github/workflows/nodejs-scripts-validate-and-release.yml'\n    branches:\n      - '+([0-9])?(.{+([0-9]),x}).x'\n      - 'master'\n      - 'next'\n      - 'next-major'\n      - 'beta'\n      - 'alpha'\n      - '!all-contributors/**'\n  pull_request: {}\njobs:\n  main:\n    # ignore all-contributors PRs\n    if: ${{ !contains(github.head_ref, 'all-contributors') }}\n    strategy:\n      matrix:\n        os: [ubuntu-latest, macos-latest]\n        node: [12, 14, 15]\n    runs-on: ${{ matrix.os }}\n    steps:\n      - name: ğŸ›‘ Cancel Previous Runs\n        uses: styfle/cancel-workflow-action@0.6.0\n        with:\n          access_token: ${{ secrets.GITHUB_TOKEN }}\n\n      - name: â¬‡ï¸ Checkout repo\n        uses: actions/checkout@v2\n\n      - name: â” Setup node\n        uses: actions/setup-node@v1\n        with:\n          node-version: ${{ matrix.node }}\n\n      - name: ğŸ“¥ Download deps\n        uses: bahmutov/npm-install@v1\n        with:\n          useLockFile: false\n          working-directory: 'nodejs/packages/scripts'\n\n      - name: â–¶ï¸ Run validate script\n        working-directory: 'nodejs/packages/scripts'\n        run: npm run validate\n\n      - name: â¬†ï¸ Upload coverage report\n        uses: codecov/codecov-action@v1\n        with:\n          directory: 'nodejs/packages/scripts/coverage/'\n\n  release:\n    needs: main\n    runs-on: ubuntu-latest\n    if:\n      ${{ github.repository == 'gsmlg/Foundation' \u0026\u0026\n      contains('refs/heads/master,refs/heads/beta,refs/heads/next,refs/heads/alpha',\n      github.ref) \u0026\u0026 github.event_name == 'push' }}\n    steps:\n      - name: ğŸ›‘ Cancel Previous Runs\n        uses: styfle/cancel-workflow-action@0.6.0\n        with:\n          access_token: ${{ secrets.GITHUB_TOKEN }}\n\n      - name: â¬‡ï¸ Checkout repo\n        uses: actions/checkout@v2\n\n      - name: â” Setup node\n        uses: actions/setup-node@v1\n        with:\n          node-version: 14\n\n      - name: ğŸ“¥ Download deps\n        uses: bahmutov/npm-install@v1\n        with:\n          useLockFile: false\n          working-directory: 'nodejs/packages/scripts'\n\n      - name: ğŸ— Run build script\n        working-directory: 'nodejs/packages/scripts'\n        run: npm run build\n\n      - name: ğŸš€ Release\n        uses: gsmlg/semantic-release-action@v2\n        with:\n          working-directory: 'nodejs/packages/scripts'\n          semantic_version: 17\n          branches: |\n            [\n              '+([0-9])?(.{+([0-9]),x}).x',\n              'master',\n              'next',\n              'next-major',\n              {name: 'beta', prerelease: true},\n              {name: 'alpha', prerelease: true}\n            ]\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}\n```\n"}},"__N_SSG":true},"page":"/blogs/[slug]","query":{"slug":"semantic-release"},"buildId":"lNHQf-qEKZsFQCCKzYVoG","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>