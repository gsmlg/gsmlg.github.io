<!DOCTYPE html><html lang="en"><head><meta name="theme-color" content="#3f51b5"/><meta charSet="utf-8"/><meta name="viewport" content="minimum-scale=1, initial-scale=1, width=device-width"/><title>使用 s2i Build镜像</title><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/01bfb1bac6c2e60ca888.css" as="style"/><link rel="stylesheet" href="/_next/static/css/01bfb1bac6c2e60ca888.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-ec44072c61940613d5b8.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.ae3781fe50e43492a499.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.c5d6f2958399c10564ad.js" as="script"/><link rel="preload" href="/_next/static/chunks/473c783ce2e4c5b5d95c83f901934eef11700fcb.cb3e3a3c5595db7384eb.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-4913e444c60399a30970.js" as="script"/><link rel="preload" href="/_next/static/chunks/f1a2a027c5898c5311b997a749ce3bdad8d3c05f.8bc7be21daada2511425.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blogs/%5Bslug%5D-4ce4b735e710a8964952.js" as="script"/><style id="jss-server-side">.MuiPaper-root {
  color: rgba(0, 0, 0, 0.87);
  transition: box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  background-color: #fff;
}
.MuiPaper-rounded {
  border-radius: 4px;
}
.MuiPaper-outlined {
  border: 1px solid rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation0 {
  box-shadow: none;
}
.MuiPaper-elevation1 {
  box-shadow: 0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12);
}
.MuiPaper-elevation2 {
  box-shadow: 0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12);
}
.MuiPaper-elevation3 {
  box-shadow: 0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12);
}
.MuiPaper-elevation4 {
  box-shadow: 0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);
}
.MuiPaper-elevation5 {
  box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),0px 5px 8px 0px rgba(0,0,0,0.14),0px 1px 14px 0px rgba(0,0,0,0.12);
}
.MuiPaper-elevation6 {
  box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);
}
.MuiPaper-elevation7 {
  box-shadow: 0px 4px 5px -2px rgba(0,0,0,0.2),0px 7px 10px 1px rgba(0,0,0,0.14),0px 2px 16px 1px rgba(0,0,0,0.12);
}
.MuiPaper-elevation8 {
  box-shadow: 0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);
}
.MuiPaper-elevation9 {
  box-shadow: 0px 5px 6px -3px rgba(0,0,0,0.2),0px 9px 12px 1px rgba(0,0,0,0.14),0px 3px 16px 2px rgba(0,0,0,0.12);
}
.MuiPaper-elevation10 {
  box-shadow: 0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12);
}
.MuiPaper-elevation11 {
  box-shadow: 0px 6px 7px -4px rgba(0,0,0,0.2),0px 11px 15px 1px rgba(0,0,0,0.14),0px 4px 20px 3px rgba(0,0,0,0.12);
}
.MuiPaper-elevation12 {
  box-shadow: 0px 7px 8px -4px rgba(0,0,0,0.2),0px 12px 17px 2px rgba(0,0,0,0.14),0px 5px 22px 4px rgba(0,0,0,0.12);
}
.MuiPaper-elevation13 {
  box-shadow: 0px 7px 8px -4px rgba(0,0,0,0.2),0px 13px 19px 2px rgba(0,0,0,0.14),0px 5px 24px 4px rgba(0,0,0,0.12);
}
.MuiPaper-elevation14 {
  box-shadow: 0px 7px 9px -4px rgba(0,0,0,0.2),0px 14px 21px 2px rgba(0,0,0,0.14),0px 5px 26px 4px rgba(0,0,0,0.12);
}
.MuiPaper-elevation15 {
  box-shadow: 0px 8px 9px -5px rgba(0,0,0,0.2),0px 15px 22px 2px rgba(0,0,0,0.14),0px 6px 28px 5px rgba(0,0,0,0.12);
}
.MuiPaper-elevation16 {
  box-shadow: 0px 8px 10px -5px rgba(0,0,0,0.2),0px 16px 24px 2px rgba(0,0,0,0.14),0px 6px 30px 5px rgba(0,0,0,0.12);
}
.MuiPaper-elevation17 {
  box-shadow: 0px 8px 11px -5px rgba(0,0,0,0.2),0px 17px 26px 2px rgba(0,0,0,0.14),0px 6px 32px 5px rgba(0,0,0,0.12);
}
.MuiPaper-elevation18 {
  box-shadow: 0px 9px 11px -5px rgba(0,0,0,0.2),0px 18px 28px 2px rgba(0,0,0,0.14),0px 7px 34px 6px rgba(0,0,0,0.12);
}
.MuiPaper-elevation19 {
  box-shadow: 0px 9px 12px -6px rgba(0,0,0,0.2),0px 19px 29px 2px rgba(0,0,0,0.14),0px 7px 36px 6px rgba(0,0,0,0.12);
}
.MuiPaper-elevation20 {
  box-shadow: 0px 10px 13px -6px rgba(0,0,0,0.2),0px 20px 31px 3px rgba(0,0,0,0.14),0px 8px 38px 7px rgba(0,0,0,0.12);
}
.MuiPaper-elevation21 {
  box-shadow: 0px 10px 13px -6px rgba(0,0,0,0.2),0px 21px 33px 3px rgba(0,0,0,0.14),0px 8px 40px 7px rgba(0,0,0,0.12);
}
.MuiPaper-elevation22 {
  box-shadow: 0px 10px 14px -6px rgba(0,0,0,0.2),0px 22px 35px 3px rgba(0,0,0,0.14),0px 8px 42px 7px rgba(0,0,0,0.12);
}
.MuiPaper-elevation23 {
  box-shadow: 0px 11px 14px -7px rgba(0,0,0,0.2),0px 23px 36px 3px rgba(0,0,0,0.14),0px 9px 44px 8px rgba(0,0,0,0.12);
}
.MuiPaper-elevation24 {
  box-shadow: 0px 11px 15px -7px rgba(0,0,0,0.2),0px 24px 38px 3px rgba(0,0,0,0.14),0px 9px 46px 8px rgba(0,0,0,0.12);
}
.MuiAppBar-root {
  width: 100%;
  display: flex;
  z-index: 1100;
  box-sizing: border-box;
  flex-shrink: 0;
  flex-direction: column;
}
.MuiAppBar-positionFixed {
  top: 0;
  left: auto;
  right: 0;
  position: fixed;
}
@media print {
  .MuiAppBar-positionFixed {
    position: absolute;
  }
}
  .MuiAppBar-positionAbsolute {
    top: 0;
    left: auto;
    right: 0;
    position: absolute;
  }
  .MuiAppBar-positionSticky {
    top: 0;
    left: auto;
    right: 0;
    position: sticky;
  }
  .MuiAppBar-positionStatic {
    position: static;
  }
  .MuiAppBar-positionRelative {
    position: relative;
  }
  .MuiAppBar-colorDefault {
    color: rgba(0, 0, 0, 0.87);
    background-color: #f5f5f5;
  }
  .MuiAppBar-colorPrimary {
    color: #fff;
    background-color: #3f51b5;
  }
  .MuiAppBar-colorSecondary {
    color: #fff;
    background-color: #f50057;
  }
  .MuiAppBar-colorInherit {
    color: inherit;
  }
  .MuiAppBar-colorTransparent {
    color: inherit;
    background-color: transparent;
  }
  .MuiToolbar-root {
    display: flex;
    position: relative;
    align-items: center;
  }
  .MuiToolbar-gutters {
    padding-left: 16px;
    padding-right: 16px;
  }
@media (min-width:600px) {
  .MuiToolbar-gutters {
    padding-left: 24px;
    padding-right: 24px;
  }
}
  .MuiToolbar-regular {
    min-height: 56px;
  }
@media (min-width:0px) and (orientation: landscape) {
  .MuiToolbar-regular {
    min-height: 48px;
  }
}
@media (min-width:600px) {
  .MuiToolbar-regular {
    min-height: 64px;
  }
}
  .MuiToolbar-dense {
    min-height: 48px;
  }
  .MuiTypography-root {
    margin: 0;
  }
  .MuiTypography-body2 {
    font-size: 0.875rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 400;
    line-height: 1.43;
    letter-spacing: 0.01071em;
  }
  .MuiTypography-body1 {
    font-size: 1rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 400;
    line-height: 1.5;
    letter-spacing: 0.00938em;
  }
  .MuiTypography-caption {
    font-size: 0.75rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 400;
    line-height: 1.66;
    letter-spacing: 0.03333em;
  }
  .MuiTypography-button {
    font-size: 0.875rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 500;
    line-height: 1.75;
    letter-spacing: 0.02857em;
    text-transform: uppercase;
  }
  .MuiTypography-h1 {
    font-size: 6rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 300;
    line-height: 1.167;
    letter-spacing: -0.01562em;
  }
  .MuiTypography-h2 {
    font-size: 3.75rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 300;
    line-height: 1.2;
    letter-spacing: -0.00833em;
  }
  .MuiTypography-h3 {
    font-size: 3rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 400;
    line-height: 1.167;
    letter-spacing: 0em;
  }
  .MuiTypography-h4 {
    font-size: 2.125rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 400;
    line-height: 1.235;
    letter-spacing: 0.00735em;
  }
  .MuiTypography-h5 {
    font-size: 1.5rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 400;
    line-height: 1.334;
    letter-spacing: 0em;
  }
  .MuiTypography-h6 {
    font-size: 1.25rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 500;
    line-height: 1.6;
    letter-spacing: 0.0075em;
  }
  .MuiTypography-subtitle1 {
    font-size: 1rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 400;
    line-height: 1.75;
    letter-spacing: 0.00938em;
  }
  .MuiTypography-subtitle2 {
    font-size: 0.875rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 500;
    line-height: 1.57;
    letter-spacing: 0.00714em;
  }
  .MuiTypography-overline {
    font-size: 0.75rem;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 400;
    line-height: 2.66;
    letter-spacing: 0.08333em;
    text-transform: uppercase;
  }
  .MuiTypography-srOnly {
    width: 1px;
    height: 1px;
    overflow: hidden;
    position: absolute;
  }
  .MuiTypography-alignLeft {
    text-align: left;
  }
  .MuiTypography-alignCenter {
    text-align: center;
  }
  .MuiTypography-alignRight {
    text-align: right;
  }
  .MuiTypography-alignJustify {
    text-align: justify;
  }
  .MuiTypography-noWrap {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }
  .MuiTypography-gutterBottom {
    margin-bottom: 0.35em;
  }
  .MuiTypography-paragraph {
    margin-bottom: 16px;
  }
  .MuiTypography-colorInherit {
    color: inherit;
  }
  .MuiTypography-colorPrimary {
    color: #3f51b5;
  }
  .MuiTypography-colorSecondary {
    color: #f50057;
  }
  .MuiTypography-colorTextPrimary {
    color: rgba(0, 0, 0, 0.87);
  }
  .MuiTypography-colorTextSecondary {
    color: rgba(0, 0, 0, 0.54);
  }
  .MuiTypography-colorError {
    color: #f44336;
  }
  .MuiTypography-displayInline {
    display: inline;
  }
  .MuiTypography-displayBlock {
    display: block;
  }
  .MuiButtonBase-root {
    color: inherit;
    border: 0;
    cursor: pointer;
    margin: 0;
    display: inline-flex;
    outline: 0;
    padding: 0;
    position: relative;
    align-items: center;
    user-select: none;
    border-radius: 0;
    vertical-align: middle;
    -moz-appearance: none;
    justify-content: center;
    text-decoration: none;
    background-color: transparent;
    -webkit-appearance: none;
    -webkit-tap-highlight-color: transparent;
  }
  .MuiButtonBase-root::-moz-focus-inner {
    border-style: none;
  }
  .MuiButtonBase-root.Mui-disabled {
    cursor: default;
    pointer-events: none;
  }
@media print {
  .MuiButtonBase-root {
    color-adjust: exact;
  }
}
  .MuiButton-root {
    color: rgba(0, 0, 0, 0.87);
    padding: 6px 16px;
    font-size: 0.875rem;
    min-width: 64px;
    box-sizing: border-box;
    transition: background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
    font-family: "Roboto", "Helvetica", "Arial", sans-serif;
    font-weight: 500;
    line-height: 1.75;
    border-radius: 4px;
    letter-spacing: 0.02857em;
    text-transform: uppercase;
  }
  .MuiButton-root:hover {
    text-decoration: none;
    background-color: rgba(0, 0, 0, 0.04);
  }
  .MuiButton-root.Mui-disabled {
    color: rgba(0, 0, 0, 0.26);
  }
@media (hover: none) {
  .MuiButton-root:hover {
    background-color: transparent;
  }
}
  .MuiButton-root:hover.Mui-disabled {
    background-color: transparent;
  }
  .MuiButton-label {
    width: 100%;
    display: inherit;
    align-items: inherit;
    justify-content: inherit;
  }
  .MuiButton-text {
    padding: 6px 8px;
  }
  .MuiButton-textPrimary {
    color: #3f51b5;
  }
  .MuiButton-textPrimary:hover {
    background-color: rgba(63, 81, 181, 0.04);
  }
@media (hover: none) {
  .MuiButton-textPrimary:hover {
    background-color: transparent;
  }
}
  .MuiButton-textSecondary {
    color: #f50057;
  }
  .MuiButton-textSecondary:hover {
    background-color: rgba(245, 0, 87, 0.04);
  }
@media (hover: none) {
  .MuiButton-textSecondary:hover {
    background-color: transparent;
  }
}
  .MuiButton-outlined {
    border: 1px solid rgba(0, 0, 0, 0.23);
    padding: 5px 15px;
  }
  .MuiButton-outlined.Mui-disabled {
    border: 1px solid rgba(0, 0, 0, 0.12);
  }
  .MuiButton-outlinedPrimary {
    color: #3f51b5;
    border: 1px solid rgba(63, 81, 181, 0.5);
  }
  .MuiButton-outlinedPrimary:hover {
    border: 1px solid #3f51b5;
    background-color: rgba(63, 81, 181, 0.04);
  }
@media (hover: none) {
  .MuiButton-outlinedPrimary:hover {
    background-color: transparent;
  }
}
  .MuiButton-outlinedSecondary {
    color: #f50057;
    border: 1px solid rgba(245, 0, 87, 0.5);
  }
  .MuiButton-outlinedSecondary:hover {
    border: 1px solid #f50057;
    background-color: rgba(245, 0, 87, 0.04);
  }
  .MuiButton-outlinedSecondary.Mui-disabled {
    border: 1px solid rgba(0, 0, 0, 0.26);
  }
@media (hover: none) {
  .MuiButton-outlinedSecondary:hover {
    background-color: transparent;
  }
}
  .MuiButton-contained {
    color: rgba(0, 0, 0, 0.87);
    box-shadow: 0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12);
    background-color: #e0e0e0;
  }
  .MuiButton-contained:hover {
    box-shadow: 0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);
    background-color: #d5d5d5;
  }
  .MuiButton-contained.Mui-focusVisible {
    box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);
  }
  .MuiButton-contained:active {
    box-shadow: 0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);
  }
  .MuiButton-contained.Mui-disabled {
    color: rgba(0, 0, 0, 0.26);
    box-shadow: none;
    background-color: rgba(0, 0, 0, 0.12);
  }
@media (hover: none) {
  .MuiButton-contained:hover {
    box-shadow: 0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12);
    background-color: #e0e0e0;
  }
}
  .MuiButton-contained:hover.Mui-disabled {
    background-color: rgba(0, 0, 0, 0.12);
  }
  .MuiButton-containedPrimary {
    color: #fff;
    background-color: #3f51b5;
  }
  .MuiButton-containedPrimary:hover {
    background-color: #303f9f;
  }
@media (hover: none) {
  .MuiButton-containedPrimary:hover {
    background-color: #3f51b5;
  }
}
  .MuiButton-containedSecondary {
    color: #fff;
    background-color: #f50057;
  }
  .MuiButton-containedSecondary:hover {
    background-color: #c51162;
  }
@media (hover: none) {
  .MuiButton-containedSecondary:hover {
    background-color: #f50057;
  }
}
  .MuiButton-disableElevation {
    box-shadow: none;
  }
  .MuiButton-disableElevation:hover {
    box-shadow: none;
  }
  .MuiButton-disableElevation.Mui-focusVisible {
    box-shadow: none;
  }
  .MuiButton-disableElevation:active {
    box-shadow: none;
  }
  .MuiButton-disableElevation.Mui-disabled {
    box-shadow: none;
  }
  .MuiButton-colorInherit {
    color: inherit;
    border-color: currentColor;
  }
  .MuiButton-textSizeSmall {
    padding: 4px 5px;
    font-size: 0.8125rem;
  }
  .MuiButton-textSizeLarge {
    padding: 8px 11px;
    font-size: 0.9375rem;
  }
  .MuiButton-outlinedSizeSmall {
    padding: 3px 9px;
    font-size: 0.8125rem;
  }
  .MuiButton-outlinedSizeLarge {
    padding: 7px 21px;
    font-size: 0.9375rem;
  }
  .MuiButton-containedSizeSmall {
    padding: 4px 10px;
    font-size: 0.8125rem;
  }
  .MuiButton-containedSizeLarge {
    padding: 8px 22px;
    font-size: 0.9375rem;
  }
  .MuiButton-fullWidth {
    width: 100%;
  }
  .MuiButton-startIcon {
    display: inherit;
    margin-left: -4px;
    margin-right: 8px;
  }
  .MuiButton-startIcon.MuiButton-iconSizeSmall {
    margin-left: -2px;
  }
  .MuiButton-endIcon {
    display: inherit;
    margin-left: 8px;
    margin-right: -4px;
  }
  .MuiButton-endIcon.MuiButton-iconSizeSmall {
    margin-right: -2px;
  }
  .MuiButton-iconSizeSmall > *:first-child {
    font-size: 18px;
  }
  .MuiButton-iconSizeMedium > *:first-child {
    font-size: 20px;
  }
  .MuiButton-iconSizeLarge > *:first-child {
    font-size: 22px;
  }
  .MuiIconButton-root {
    flex: 0 0 auto;
    color: rgba(0, 0, 0, 0.54);
    padding: 12px;
    overflow: visible;
    font-size: 1.5rem;
    text-align: center;
    transition: background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
    border-radius: 50%;
  }
  .MuiIconButton-root:hover {
    background-color: rgba(0, 0, 0, 0.04);
  }
  .MuiIconButton-root.Mui-disabled {
    color: rgba(0, 0, 0, 0.26);
    background-color: transparent;
  }
@media (hover: none) {
  .MuiIconButton-root:hover {
    background-color: transparent;
  }
}
  .MuiIconButton-edgeStart {
    margin-left: -12px;
  }
  .MuiIconButton-sizeSmall.MuiIconButton-edgeStart {
    margin-left: -3px;
  }
  .MuiIconButton-edgeEnd {
    margin-right: -12px;
  }
  .MuiIconButton-sizeSmall.MuiIconButton-edgeEnd {
    margin-right: -3px;
  }
  .MuiIconButton-colorInherit {
    color: inherit;
  }
  .MuiIconButton-colorPrimary {
    color: #3f51b5;
  }
  .MuiIconButton-colorPrimary:hover {
    background-color: rgba(63, 81, 181, 0.04);
  }
@media (hover: none) {
  .MuiIconButton-colorPrimary:hover {
    background-color: transparent;
  }
}
  .MuiIconButton-colorSecondary {
    color: #f50057;
  }
  .MuiIconButton-colorSecondary:hover {
    background-color: rgba(245, 0, 87, 0.04);
  }
@media (hover: none) {
  .MuiIconButton-colorSecondary:hover {
    background-color: transparent;
  }
}
  .MuiIconButton-sizeSmall {
    padding: 3px;
    font-size: 1.125rem;
  }
  .MuiIconButton-label {
    width: 100%;
    display: flex;
    align-items: inherit;
    justify-content: inherit;
  }
  .MuiSvgIcon-root {
    fill: currentColor;
    width: 1em;
    height: 1em;
    display: inline-block;
    font-size: 1.5rem;
    transition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
    flex-shrink: 0;
    user-select: none;
  }
  .MuiSvgIcon-colorPrimary {
    color: #3f51b5;
  }
  .MuiSvgIcon-colorSecondary {
    color: #f50057;
  }
  .MuiSvgIcon-colorAction {
    color: rgba(0, 0, 0, 0.54);
  }
  .MuiSvgIcon-colorError {
    color: #f44336;
  }
  .MuiSvgIcon-colorDisabled {
    color: rgba(0, 0, 0, 0.26);
  }
  .MuiSvgIcon-fontSizeInherit {
    font-size: inherit;
  }
  .MuiSvgIcon-fontSizeSmall {
    font-size: 1.25rem;
  }
  .MuiSvgIcon-fontSizeLarge {
    font-size: 2.1875rem;
  }
  .jss2 {
    flex: 1 1 auto;
    width: 100vw;
    display: flex;
    min-height: 100vh;
    flex-direction: column;
  }
  .jss3 {
    flex: 1;
    display: flex;
  }
  .jss4 {
    color: #fff;
    margin-top: 0.5em;
    text-align: center;
    line-height: 2em;
    background-color: #3f51b5;
  }
  .jss5 {
    margin-left: -12px;
    margin-right: 20px;
  }
  .jss7 {
    font-weight: bold;
    margin-left: 20px;
    margin-right: 20px;
  }
  .MuiDivider-root {
    border: none;
    height: 1px;
    margin: 0;
    flex-shrink: 0;
    background-color: rgba(0, 0, 0, 0.12);
  }
  .MuiDivider-absolute {
    left: 0;
    width: 100%;
    bottom: 0;
    position: absolute;
  }
  .MuiDivider-inset {
    margin-left: 72px;
  }
  .MuiDivider-light {
    background-color: rgba(0, 0, 0, 0.08);
  }
  .MuiDivider-middle {
    margin-left: 16px;
    margin-right: 16px;
  }
  .MuiDivider-vertical {
    width: 1px;
    height: 100%;
  }
  .MuiDivider-flexItem {
    height: auto;
    align-self: stretch;
  }
  .jss1 {
    flex: 1;
    margin: 24px;
    padding-top: 16px;
    padding-left: 16px;
    padding-right: 16px;
    padding-bottom: 16px;
  }
@media (min-width:600px) {
  .jss1 {
    padding-left: 24px;
    padding-right: 24px;
  }
}</style></head><body><div id="__next"><section class="jss2"><header class="MuiPaper-root MuiAppBar-root MuiAppBar-positionStatic MuiAppBar-colorPrimary MuiPaper-elevation4"><div class="MuiToolbar-root MuiToolbar-regular MuiToolbar-gutters"><button class="MuiButtonBase-root MuiIconButton-root jss5 MuiIconButton-colorInherit" tabindex="0" type="button" aria-label="Menu"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></span></button><p class="MuiTypography-root jss3 MuiTypography-body1 MuiTypography-colorInherit" type="title"><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-colorInherit" tabindex="0" type="button"><span class="MuiButton-label"><a href="/">Home</a></span></button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-colorInherit" tabindex="0" type="button"><span class="MuiButton-label"><a href="/blogs">Blog</a></span></button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-colorInherit" tabindex="0" type="button"><span class="MuiButton-label"><a href="/presentations">Presentation</a></span></button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-colorInherit" tabindex="0" type="button"><span class="MuiButton-label"><a href="/tools">Tool</a></span></button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-colorInherit" tabindex="0" type="button"><span class="MuiButton-label"><a href="/games">Game</a></span></button></p></div></header><section class="jss3"><div class="MuiPaper-root jss1 MuiPaper-elevation4 MuiPaper-rounded"><header><h1 class="MuiTypography-root MuiTypography-body1">使用 s2i Build镜像</h1><div class="MuiTypography-root MuiTypography-body1">Author:<!-- -->Gao</div><div class="MuiTypography-root MuiTypography-body1">Created At:<!-- -->2019-08-15</div></header><hr class="MuiDivider-root"/><section class="MuiTypography-root blog-content MuiTypography-body1"><h1>使用 <code>s2i</code> Build 镜像</h1><h2>安装<code>s2i</code></h2><ul><li>使用 <code>go get</code></li></ul><pre><code class="language-shell">$ go get github.com/openshift/source-to-image/cmd/s2i</code></pre><ul><li>macOS 使用</li></ul><pre><code class="language-shell">$ brew install source-to-image</code></pre><ul><li>Linux 使用</li></ul><p>在<a href="https://github.com/openshift/source-to-image/releases">版本发布页面</a>找到对应链接下载</p><pre><code class="language-shell">curl -sSL https://github.com/openshift/source-to-image/releases/download/v1.1.14/source-to-image-v1.1.14-874754de-linux-amd64.tar.gz | tar zxf - -C /usr/local/bin/ &#x27;./s2i&#x27;</code></pre><ul><li>Windows 使用</li></ul><p>在<a href="https://github.com/openshift/source-to-image/releases">版本发布页面</a>找到对应链接下载</p><p>下载</p><pre><code>https://github.com/openshift/source-to-image/releases/download/v1.1.14/source-to-image-v1.1.14-874754de-windows-amd64.zip</code></pre><ul><li>源码编译</li></ul><pre><code class="language-shell">$ go get github.com/openshift/source-to-image
$ cd ${GOPATH}/src/github.com/openshift/source-to-image
$ export PATH=$PATH:${GOPATH}/src/github.com/openshift/source-to-image/_output/local/bin/linux/amd64/
$ hack/build-go.sh</code></pre><h2>使用<code>s2i</code></h2><p>使用方式为：</p><pre><code class="language-shell">s2i [source dir] [builder image] [built image name]</code></pre><p>可用的 builder 镜像源码可以在 <a href="https://github.com/sclorg">Software Collection</a> 找到</p><h3>创建镜像 PHP 项目镜像</h3><p>PHP builder 镜像</p><ul><li>centos/php-72-centos7</li><li>centos/php-71-centos7</li><li>centos/php-70-centos7</li><li>centos/php-56-centos7</li><li>centos/php-55-centos7</li></ul><p>创建 test-app 镜像</p><pre><code>s2i build /root/s2i-php-test-app centos/php-72-centos7 my-test-app

docker run --rm -p 8080:8080 my-test-app
</code></pre><h4>配置运行时参数</h4><h5>给镜像配置以下环境变量可以作用于<code>php.ini</code>:</h5><ul><li><strong>ERROR_REPORTING</strong><ul><li>Informs PHP of which errors, warnings and notices you would like it to take action for</li><li>Default: E_ALL &amp; ~E_NOTICE</li></ul></li><li><strong>DISPLAY_ERRORS</strong><ul><li>Controls whether or not and where PHP will output errors, notices and warnings</li><li>Default: ON</li></ul></li><li><strong>DISPLAY_STARTUP_ERRORS</strong><ul><li>Cause display errors which occur during PHP&#x27;s startup sequence to be handled separately from display errors</li><li>Default: OFF</li></ul></li><li><strong>TRACK_ERRORS</strong><ul><li>Store the last error/warning message in $php_errormsg (boolean)</li><li>Default: OFF</li></ul></li><li><strong>HTML_ERRORS</strong><ul><li>Link errors to documentation related to the error</li><li>Default: ON</li></ul></li><li><strong>INCLUDE_PATH</strong><ul><li>Path for PHP source files</li><li>Default: .:/opt/app-root/src:/opt/rh/rh-php72/root/usr/share/pear (EL7)</li><li>Default: .:/opt/app-root/src:/usr/share/pear (EL8, Fedora)</li></ul></li><li><strong>PHP_MEMORY_LIMIT</strong><ul><li>Memory Limit</li><li>Default: 128M</li></ul></li><li><strong>SESSION_NAME</strong><ul><li>Name of the session</li><li>Default: PHPSESSID</li></ul></li><li><strong>SESSION_HANDLER</strong><ul><li>Method for saving sessions</li><li>Default: files</li></ul></li><li><strong>SESSION_PATH</strong><ul><li>Location for session data files</li><li>Default: /tmp/sessions</li></ul></li><li><strong>SESSION_COOKIE_DOMAIN</strong><ul><li>The domain for which the cookie is valid.</li><li>Default:</li></ul></li><li><strong>SESSION_COOKIE_HTTPONLY</strong><ul><li>Whether or not to add the httpOnly flag to the cookie</li><li>Default: 0</li></ul></li><li><strong>SESSION_COOKIE_SECURE</strong><ul><li>Specifies whether cookies should only be sent over secure connections.</li><li>Default: Off</li></ul></li><li><strong>SHORT_OPEN_TAG</strong><ul><li>Determines whether or not PHP will recognize code between <!-- -->&lt;? and ?&gt;<!-- --> tags</li><li>Default: OFF</li></ul></li><li><strong>DOCUMENTROOT</strong><ul><li>Path that defines the DocumentRoot for your application (ie. /public)</li><li>Default: /</li></ul></li></ul><h5>给镜像配置以下环境变量可以作用于<code>opcache.ini</code>:</h5><ul><li><strong>OPCACHE_MEMORY_CONSUMPTION</strong><ul><li>The OPcache shared memory storage size in megabytes</li><li>Default: 128</li></ul></li><li><strong>OPCACHE_REVALIDATE_FREQ</strong><ul><li>How often to check script timestamps for updates, in seconds. 0 will result in OPcache checking for updates on every request.</li><li>Default: 2</li></ul></li></ul><h5>以下配置环境变量作用于 Apache 服务，运行于 Apache <a href="https://httpd.apache.org/docs/2.4/mod/mpm_common.html">MPM prefork</a> 模式:</h5><ul><li><strong>HTTPD_START_SERVERS</strong><ul><li>The <a href="https://httpd.apache.org/docs/2.4/mod/mpm_common.html#startservers">StartServers</a>
directive sets the number of child server processes created on startup.</li><li>Default: 8</li></ul></li><li><strong>HTTPD_MAX_REQUEST_WORKERS</strong><ul><li>The <a href="https://httpd.apache.org/docs/2.4/mod/mpm_common.html#maxrequestworkers">MaxRequestWorkers</a>
directive sets the limit on the number of simultaneous requests that will be served.</li><li><code>MaxRequestWorkers</code> was called <code>MaxClients</code> before version httpd 2.3.13.</li><li>Default: 256 (this is automatically tuned by setting Cgroup limits for the container using this formula:
<code>TOTAL_MEMORY / 15MB</code>. The 15MB is average size of a single httpd process.</li></ul></li></ul><h5>以下配置环境变量作用于 composer:</h5><ul><li><strong>COMPOSER_MIRROR</strong><ul><li>Adds a custom composer repository mirror URL to composer configuration. Note: This only affects packages listed in composer.json.</li></ul></li><li><strong>COMPOSER_INSTALLER</strong><ul><li>Overrides the default URL for downloading Composer of <a href="https://getcomposer.org/installer">https://getcomposer.org/installer</a>. Useful in disconnected environments.</li></ul></li><li><strong>COMPOSER_ARGS</strong><ul><li>Adds extra arguments to the <code>composer install</code> command line (for example <code>--no-dev</code>).</li></ul></li></ul><h4>代码目录配置</h4><p>当以下文件在代码目录中时，会被使用：</p><ul><li><p><strong>composer.json</strong></p><p>List of dependencies to be installed with <code>composer</code>. The format is documented
<a href="https://getcomposer.org/doc/04-schema.md">here</a>.</p></li></ul><ul><li><p><strong>.htaccess</strong></p><p>In case the <strong>DocumentRoot</strong> of the application is nested within the source directory <code>/opt/app-root/src</code>,
users can provide their own Apache <strong>.htaccess</strong> file. This allows the overriding of Apache&#x27;s behavior and
specifies how application requests should be handled. The <strong>.htaccess</strong> file needs to be located at the root
of the application source.</p></li><li><p><strong>.s2i/environment</strong></p><p>也可以用于配置环境变量</p></li></ul><h3>创建 nodejs 项目镜像</h3><p>可用 builder 镜像</p><ul><li>centos/nodejs-10-centos7</li><li>centos/nodejs-8-centos7</li><li>centos/nodejs-6-centos7</li></ul><h4>服务启动</h4><p>默认会调用 <code>npm start</code> 来启动服务</p><p>当<code>DEV_MODE=true</code>时，默认会调用<code>nodemon &lt;main attribute in package.json&gt;</code>,来启动服务，如果失败再调用，<code>npm start</code> 来启动服务</p><h4>可配置环境变量</h4><p><strong><code>NODE_ENV</code></strong>
NodeJS runtime mode (default: &quot;production&quot;)</p><p><strong><code>DEV_MODE</code></strong>
When set to &quot;true&quot;, <code>nodemon</code> will be used to automatically reload the server while you work (default: &quot;false&quot;). Setting <code>DEV_MODE</code> to &quot;true&quot; will change the <code>NODE_ENV</code> default to &quot;development&quot; (if not explicitly set).</p><p><strong><code>NPM_RUN</code></strong>
Select an alternate / custom runtime mode, defined in your <code>package.json</code> file&#x27;s <a href="https://docs.npmjs.com/misc/scripts"><code>scripts</code></a> section (default: npm run &quot;start&quot;). These user-defined run-scripts are unavailable while <code>DEV_MODE</code> is in use.</p><p><strong><code>HTTP_PROXY</code></strong>
Use an npm proxy during assembly</p><p><strong><code>HTTPS_PROXY</code></strong>
Use an npm proxy during assembly</p><p><strong><code>NPM_MIRROR</code></strong>
Use a custom NPM registry mirror to download packages during the build process</p><h3>创建 go 项目镜像</h3><p>可用 builder 镜像</p><ul><li>centos/go-toolset-7-centos7</li></ul><h4>配置运行时参数</h4><ul><li><strong>IMPORT_URL</strong></li></ul><p>指定应用的导入 URL，如 <code>github.com/someorg/somerepo</code></p><ul><li><strong>INSTALL_URL</strong></li></ul><p>如果<code>main.go</code>不在代码目录下时，指定 build 目录,如 <code>github.com/someorg/somerepo/somefolder</code></p><h3>创建 java 项目镜像</h3><p>由于 java 项目的多样性，建议进行定制</p></section></div></section><footer class="jss4"><div class="container"><span class="jss8">Copyright © 2017-2021 GSMLG - Powered by GSMLG Web.</span></div></footer></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"build-with-s2i","blog":{"id":33,"name":"build-with-s2i","title":"使用 s2i Build镜像","date":"2019-08-15","author":"Gao","content":"# 使用 `s2i` Build 镜像\n\n## 安装`s2i`\n\n- 使用 `go get`\n\n```shell\n$ go get github.com/openshift/source-to-image/cmd/s2i\n```\n\n- macOS 使用\n\n```shell\n$ brew install source-to-image\n```\n\n- Linux 使用\n\n在[版本发布页面](https://github.com/openshift/source-to-image/releases)找到对应链接下载\n\n```shell\ncurl -sSL https://github.com/openshift/source-to-image/releases/download/v1.1.14/source-to-image-v1.1.14-874754de-linux-amd64.tar.gz | tar zxf - -C /usr/local/bin/ './s2i'\n```\n\n- Windows 使用\n\n在[版本发布页面](https://github.com/openshift/source-to-image/releases)找到对应链接下载\n\n下载\n\n```\nhttps://github.com/openshift/source-to-image/releases/download/v1.1.14/source-to-image-v1.1.14-874754de-windows-amd64.zip\n```\n\n- 源码编译\n\n```shell\n$ go get github.com/openshift/source-to-image\n$ cd ${GOPATH}/src/github.com/openshift/source-to-image\n$ export PATH=$PATH:${GOPATH}/src/github.com/openshift/source-to-image/_output/local/bin/linux/amd64/\n$ hack/build-go.sh\n```\n\n## 使用`s2i`\n\n使用方式为：\n\n```shell\ns2i [source dir] [builder image] [built image name]\n```\n\n可用的 builder 镜像源码可以在 [Software Collection](https://github.com/sclorg) 找到\n\n### 创建镜像 PHP 项目镜像\n\nPHP builder 镜像\n\n- centos/php-72-centos7\n- centos/php-71-centos7\n- centos/php-70-centos7\n- centos/php-56-centos7\n- centos/php-55-centos7\n\n创建 test-app 镜像\n\n```\ns2i build /root/s2i-php-test-app centos/php-72-centos7 my-test-app\n\ndocker run --rm -p 8080:8080 my-test-app\n\n```\n\n#### 配置运行时参数\n\n##### 给镜像配置以下环境变量可以作用于`php.ini`:\n\n- **ERROR_REPORTING**\n  - Informs PHP of which errors, warnings and notices you would like it to take action for\n  - Default: E_ALL \u0026 ~E_NOTICE\n- **DISPLAY_ERRORS**\n  - Controls whether or not and where PHP will output errors, notices and warnings\n  - Default: ON\n- **DISPLAY_STARTUP_ERRORS**\n  - Cause display errors which occur during PHP's startup sequence to be handled separately from display errors\n  - Default: OFF\n- **TRACK_ERRORS**\n  - Store the last error/warning message in \\$php_errormsg (boolean)\n  - Default: OFF\n- **HTML_ERRORS**\n  - Link errors to documentation related to the error\n  - Default: ON\n- **INCLUDE_PATH**\n  - Path for PHP source files\n  - Default: .:/opt/app-root/src:/opt/rh/rh-php72/root/usr/share/pear (EL7)\n  - Default: .:/opt/app-root/src:/usr/share/pear (EL8, Fedora)\n- **PHP_MEMORY_LIMIT**\n  - Memory Limit\n  - Default: 128M\n- **SESSION_NAME**\n  - Name of the session\n  - Default: PHPSESSID\n- **SESSION_HANDLER**\n  - Method for saving sessions\n  - Default: files\n- **SESSION_PATH**\n  - Location for session data files\n  - Default: /tmp/sessions\n- **SESSION_COOKIE_DOMAIN**\n  - The domain for which the cookie is valid.\n  - Default:\n- **SESSION_COOKIE_HTTPONLY**\n  - Whether or not to add the httpOnly flag to the cookie\n  - Default: 0\n- **SESSION_COOKIE_SECURE**\n  - Specifies whether cookies should only be sent over secure connections.\n  - Default: Off\n- **SHORT_OPEN_TAG**\n  - Determines whether or not PHP will recognize code between \u003c? and ?\u003e tags\n  - Default: OFF\n- **DOCUMENTROOT**\n  - Path that defines the DocumentRoot for your application (ie. /public)\n  - Default: /\n\n##### 给镜像配置以下环境变量可以作用于`opcache.ini`:\n\n- **OPCACHE_MEMORY_CONSUMPTION**\n  - The OPcache shared memory storage size in megabytes\n  - Default: 128\n- **OPCACHE_REVALIDATE_FREQ**\n  - How often to check script timestamps for updates, in seconds. 0 will result in OPcache checking for updates on every request.\n  - Default: 2\n\n##### 以下配置环境变量作用于 Apache 服务，运行于 Apache [MPM prefork](https://httpd.apache.org/docs/2.4/mod/mpm_common.html) 模式:\n\n- **HTTPD_START_SERVERS**\n  - The [StartServers](https://httpd.apache.org/docs/2.4/mod/mpm_common.html#startservers)\n    directive sets the number of child server processes created on startup.\n  - Default: 8\n- **HTTPD_MAX_REQUEST_WORKERS**\n  - The [MaxRequestWorkers](https://httpd.apache.org/docs/2.4/mod/mpm_common.html#maxrequestworkers)\n    directive sets the limit on the number of simultaneous requests that will be served.\n  - `MaxRequestWorkers` was called `MaxClients` before version httpd 2.3.13.\n  - Default: 256 (this is automatically tuned by setting Cgroup limits for the container using this formula:\n    `TOTAL_MEMORY / 15MB`. The 15MB is average size of a single httpd process.\n\n##### 以下配置环境变量作用于 composer:\n\n- **COMPOSER_MIRROR**\n  - Adds a custom composer repository mirror URL to composer configuration. Note: This only affects packages listed in composer.json.\n- **COMPOSER_INSTALLER**\n  - Overrides the default URL for downloading Composer of https://getcomposer.org/installer. Useful in disconnected environments.\n- **COMPOSER_ARGS**\n  - Adds extra arguments to the `composer install` command line (for example `--no-dev`).\n\n#### 代码目录配置\n\n当以下文件在代码目录中时，会被使用：\n\n- **composer.json**\n\n  List of dependencies to be installed with `composer`. The format is documented\n  [here](https://getcomposer.org/doc/04-schema.md).\n\n* **.htaccess**\n\n  In case the **DocumentRoot** of the application is nested within the source directory `/opt/app-root/src`,\n  users can provide their own Apache **.htaccess** file. This allows the overriding of Apache's behavior and\n  specifies how application requests should be handled. The **.htaccess** file needs to be located at the root\n  of the application source.\n\n* **.s2i/environment**\n\n  也可以用于配置环境变量\n\n### 创建 nodejs 项目镜像\n\n可用 builder 镜像\n\n- centos/nodejs-10-centos7\n- centos/nodejs-8-centos7\n- centos/nodejs-6-centos7\n\n#### 服务启动\n\n默认会调用 `npm start` 来启动服务\n\n当`DEV_MODE=true`时，默认会调用`nodemon \u003cmain attribute in package.json\u003e`,来启动服务，如果失败再调用，`npm start` 来启动服务\n\n#### 可配置环境变量\n\n**`NODE_ENV`**\nNodeJS runtime mode (default: \"production\")\n\n**`DEV_MODE`**\nWhen set to \"true\", `nodemon` will be used to automatically reload the server while you work (default: \"false\"). Setting `DEV_MODE` to \"true\" will change the `NODE_ENV` default to \"development\" (if not explicitly set).\n\n**`NPM_RUN`**\nSelect an alternate / custom runtime mode, defined in your `package.json` file's [`scripts`](https://docs.npmjs.com/misc/scripts) section (default: npm run \"start\"). These user-defined run-scripts are unavailable while `DEV_MODE` is in use.\n\n**`HTTP_PROXY`**\nUse an npm proxy during assembly\n\n**`HTTPS_PROXY`**\nUse an npm proxy during assembly\n\n**`NPM_MIRROR`**\nUse a custom NPM registry mirror to download packages during the build process\n\n### 创建 go 项目镜像\n\n可用 builder 镜像\n\n- centos/go-toolset-7-centos7\n\n#### 配置运行时参数\n\n- **IMPORT_URL**\n\n指定应用的导入 URL，如 `github.com/someorg/somerepo`\n\n- **INSTALL_URL**\n\n如果`main.go`不在代码目录下时，指定 build 目录,如 `github.com/someorg/somerepo/somefolder`\n\n### 创建 java 项目镜像\n\n由于 java 项目的多样性，建议进行定制\n"}},"__N_SSG":true},"page":"/blogs/[slug]","query":{"slug":"build-with-s2i"},"buildId":"GPcFZVenZHL74q9GwSsAq","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-c404d6afeb7944ba47a6.js"></script><script src="/_next/static/chunks/main-ec44072c61940613d5b8.js" async=""></script><script src="/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/_next/static/chunks/framework.ae3781fe50e43492a499.js" async=""></script><script src="/_next/static/chunks/commons.c5d6f2958399c10564ad.js" async=""></script><script src="/_next/static/chunks/473c783ce2e4c5b5d95c83f901934eef11700fcb.cb3e3a3c5595db7384eb.js" async=""></script><script src="/_next/static/chunks/pages/_app-4913e444c60399a30970.js" async=""></script><script src="/_next/static/chunks/f1a2a027c5898c5311b997a749ce3bdad8d3c05f.8bc7be21daada2511425.js" async=""></script><script src="/_next/static/chunks/pages/blogs/%5Bslug%5D-4ce4b735e710a8964952.js" async=""></script><script src="/_next/static/GPcFZVenZHL74q9GwSsAq/_buildManifest.js" async=""></script><script src="/_next/static/GPcFZVenZHL74q9GwSsAq/_ssgManifest.js" async=""></script></body></html>